<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>RedWolfChao Blog</title>
  <subtitle>沉默是金</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://joryhe.coding.me/"/>
  <updated>2017-05-10T09:28:08.807Z</updated>
  <id>http://joryhe.coding.me/</id>
  
  <author>
    <name>RedWolfChao</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>��׿�ƶ�����(��)-Smail_HelloWorld</title>
    <link href="http://joryhe.coding.me/post/%E5%AE%89%E5%8D%93%E7%A7%BB%E5%8A%A8%E9%80%86%E5%90%91(%E5%9B%9B)-Smail_HelloWorld.html"/>
    <id>http://joryhe.coding.me/post/安卓移动逆向(四)-Smail_HelloWorld.html</id>
    <published>2017-05-08T10:18:18.000Z</published>
    <updated>2017-05-10T09:28:08.807Z</updated>
    
    <content type="html"><![CDATA[<p>###���ֱ�дһ��Smail���͵�HelloWord###</p>
<p><strong>��ʼ��д</strong></p>
<p><strong>��Ҫֱ�Ӹ���,Ҫһ��һ���ַ���,����û������!!</strong><br><strong>��Ҫֱ�Ӹ���,Ҫһ��һ���ַ���,����û������!!!!</strong><br><strong>��Ҫֱ�Ӹ���,Ҫһ��һ���ַ���,����û������!!!!!!</strong></p>
<figure class="highlight smali"><table><tr><td class="code"><pre><div class="line"><span class="keyword">.class</span><span class="keyword"> public</span> <span class="class">LHelloWorld;</span>	<span class="comment">#��������</span></div><div class="line"><span class="keyword">.super</span> <span class="class">Ljava/lang/Object;</span>	<span class="comment">#���常��</span></div><div class="line"><span class="keyword">.method</span><span class="keyword"> public</span><span class="keyword"> static</span> main&#123;[<span class="class">Ljava/lang/String;</span>&#125;V	<span class="comment">#����main()&lt;������&gt;</span></div><div class="line">	.registers 4	<span class="comment">#������ʹ��v0,v1,v2�Ĵ�����һ�������Ĵ���</span></div><div class="line">	.prologue	<span class="comment">#������ʼָ��</span></div><div class="line"><span class="built_in">	return-void	</span><span class="comment">#û�з���ֵvoid</span><span class="keyword"></span></div><div class="line">	.end method</div></pre></td></tr></table></figure>
<p><strong>����һ��HelloWorld�ļܹ�����,������һ���ɱ������е�DEX�ļ�����С���ɲ���,�������ǽ���.prologue(������ʼָ��)�±�д��������:</strong></p>
<figure class="highlight smali"><table><tr><td class="code"><pre><div class="line"><span class="comment">#��ָ��</span><span class="built_in"></span></div><div class="line">nop</div><div class="line">nop<span class="built_in"></span></div><div class="line">nop</div><div class="line"><span class="comment">#���ݶ���ָ��</span><span class="built_in"></span></div><div class="line">const/16 v0, 0x8	<span class="comment">#v0=0x8</span><span class="built_in"></span></div><div class="line">const/4 v1, 0x5		<span class="comment">#v1=0v5</span><span class="built_in"></span></div><div class="line">const/4 v2, 0x3		<span class="comment">#v2=0x3</span></div><div class="line"><span class="comment">#���ݲ���ָ��</span><span class="built_in"></span></div><div class="line">move v1, v2		<span class="comment">#v1=v2</span></div><div class="line"><span class="comment">#��������ָ��</span><span class="built_in"></span></div><div class="line">new-array v0,v0,[I	<span class="comment"># v0 = new int[v0(8)];</span><span class="built_in"></span></div><div class="line">array-length v1, v0	<span class="comment"># v1 = v0(8);</span></div><div class="line"><span class="comment">#ʵ������ָ��</span><span class="built_in"></span></div><div class="line">new-instance v1, <span class="class">Ljava/lang/StringBuilder;</span>	<span class="comment">#v1 = new StringBuilder();</span></div><div class="line"><span class="comment">#��������ָ��</span></div><div class="line">invoke-direct&#123;v1&#125;, <span class="class">Ljava/lang/StringBuilder;</span>-&gt;&lt;init&gt;()V		<span class="comment">#(��ȷ���ǲ���������˼) void init(v1)</span></div><div class="line"><span class="comment">#��תָ��</span><span class="built_in"></span></div><div class="line">if-nez v0,<span class="keyword"> :cond_0</span>	<span class="comment">#����v0!=0;����ת��cond_0</span><span class="built_in"></span></div><div class="line">goto : goto_0		<span class="comment">#�����ͽ���goto_0</span><span class="keyword"></span></div><div class="line">:cond_0			<span class="comment">#cond_0��ʼ</span></div><div class="line"><span class="comment">#����ת��ָ��</span><span class="built_in"></span></div><div class="line">int-to-float v2,v2	<span class="comment">#v2 = (float)v2</span></div><div class="line"><span class="comment">#��������ָ��</span><span class="built_in"></span></div><div class="line">add-float v2,v2,v2	<span class="comment">#v2 = v2+v2</span></div><div class="line"><span class="comment">#�Ƚ�ָ��</span><span class="built_in"></span></div><div class="line">cmpl-float v0,v2,v2	<span class="comment">#if(v2==v2) v0 = 0</span></div><div class="line"><span class="comment">#�ֶβ���ָ��</span><span class="built_in"></span></div><div class="line">sget-object v0,<span class="class">Ljava/lang/System;</span>-&gt;out:<span class="class">Ljava/io/PrintStream;</span>	<span class="comment"># v0 = out();</span><span class="built_in"></span></div><div class="line">const-string v1,<span class="string">"HelloWorld"</span> <span class="comment">#�����ַ��� v1 = "HellpWorld"</span></div><div class="line"><span class="comment">#��������ָ��</span></div><div class="line">invoke-virtual&#123;v0,v1&#125;,<span class="class">Ljava/io/PrintStream;</span>-&gt;println(<span class="class">Ljava/lang/String;</span>)V	<span class="comment">#out.println(v1)</span></div><div class="line"><span class="comment">#����ָ��</span><span class="keyword"></span></div><div class="line">:goto_0	<span class="comment">#goto_0 ��ʼ</span></div></pre></td></tr></table></figure>
<p><strong>���ɴ�������,</strong></p>
<figure class="highlight smali"><table><tr><td class="code"><pre><div class="line"><span class="keyword">.class</span><span class="keyword"> public</span> <span class="class">LHelloWorld;</span>	<span class="comment">#��������</span></div><div class="line"><span class="keyword">.super</span> <span class="class">Ljava/lang/Object;</span>	<span class="comment">#���常��</span></div><div class="line"><span class="keyword">.method</span><span class="keyword"> public</span><span class="keyword"> static</span> main([<span class="class">Ljava/lang/String;</span>)V	<span class="comment">#����main()&lt;������&gt;</span></div><div class="line">	.registers 4	<span class="comment">#������ʹ��v0,v1,v2�Ĵ�����һ�������Ĵ���</span></div><div class="line">	.prologue	<span class="comment">#������ʼָ��</span></div><div class="line">	<span class="comment">#��ָ��</span></div><div class="line"><span class="built_in">	nop</span></div><div class="line"><span class="built_in">	nop</span></div><div class="line"><span class="built_in">	nop</span></div><div class="line">	<span class="comment">#���ݶ���ָ��</span></div><div class="line"><span class="built_in">	const/16 </span>v0, 0x8	<span class="comment">#v0=0x8</span></div><div class="line"><span class="built_in">	const/4 </span>v1, 0x5		<span class="comment">#v1=0v5</span></div><div class="line"><span class="built_in">	const/4 </span>v2, 0x3		<span class="comment">#v2=0x3</span></div><div class="line">	<span class="comment">#���ݲ���ָ��</span></div><div class="line"><span class="built_in">	move </span>v1, v2		<span class="comment">#v1=v2</span></div><div class="line">	<span class="comment">#��������ָ��</span></div><div class="line"><span class="built_in">	new-array </span>v0,v0,[I	<span class="comment"># v0 = new int[v0(8)];</span></div><div class="line"><span class="built_in">	array-length </span>v1, v0	<span class="comment"># v1 = v0(8);</span></div><div class="line">	<span class="comment">#ʵ������ָ��</span></div><div class="line"><span class="built_in">	new-instance </span>v1, <span class="class">Ljava/lang/StringBuilder;</span>	<span class="comment">#v1 = new StringBuilder();</span></div><div class="line">	<span class="comment">#��������ָ��</span></div><div class="line">	invoke-direct&#123;v1&#125;, <span class="class">Ljava/lang/StringBuilder;</span>-&gt;&lt;init&gt;()V		<span class="comment">#(��ȷ���ǲ���������˼) void init(v1)</span></div><div class="line">	<span class="comment">#��תָ��</span></div><div class="line"><span class="built_in">	if-nez </span>v0,<span class="keyword"> :cond_0</span>	<span class="comment">#����v0!=0;����ת��cond_0</span></div><div class="line"><span class="built_in">	goto </span>: goto_0		<span class="comment">#�����ͽ���goto_0</span></div><div class="line"><span class="keyword">	:cond_0</span>			<span class="comment">#cond_0��ʼ</span></div><div class="line">	<span class="comment">#����ת��ָ��</span></div><div class="line"><span class="built_in">	int-to-float </span>v2,v2	<span class="comment">#v2 = (float)v2</span></div><div class="line">	<span class="comment">#��������ָ��</span></div><div class="line"><span class="built_in">	add-float </span>v2,v2,v2	<span class="comment">#v2 = v2+v2</span></div><div class="line">	<span class="comment">#�Ƚ�ָ��</span></div><div class="line"><span class="built_in">	cmpl-float </span>v0,v2,v2	<span class="comment">#if(v2==v2) v0 = 0</span></div><div class="line">	<span class="comment">#�ֶβ���ָ��</span></div><div class="line"><span class="built_in">	sget-object </span>v0,<span class="class">Ljava/lang/System;</span>-&gt;out:<span class="class">Ljava/io/PrintStream;</span>	<span class="comment"># v0 = out();</span></div><div class="line"><span class="built_in">	const-string </span>v1,<span class="string">"HelloWorld"</span> <span class="comment">#�����ַ��� v1 = "HellpWorld"</span></div><div class="line">	<span class="comment">#��������ָ��</span></div><div class="line">	invoke-virtual&#123;v0,v1&#125;,<span class="class">Ljava/io/PrintStream;</span>-&gt;println(<span class="class">Ljava/lang/String;</span>)V	<span class="comment">#out.println(v1)</span></div><div class="line">	<span class="comment">#����ָ��</span></div><div class="line"><span class="keyword">	:goto_0</span>	<span class="comment">#goto_0 ��ʼ</span></div><div class="line"><span class="built_in">	return-void	</span><span class="comment">#û�з���ֵvoid</span><span class="keyword"></span></div><div class="line">	.end method</div></pre></td></tr></table></figure>
<p><strong>Ȼ�����ǿ���ͨ������java -jar E:\Reverse\smali_baksmali\smali.jar -o classes.dex HelloWorld.smali����Smali�ļ�������dex�ļ�(������”E:\Reverse\smali_baksmali\smali.jar”Ҫ�������˻��������Ͳ���������·����,������Ҳ��һ��)</strong></p>
<p><strong>����û�б���,�ͻ��ڵ�ǰĿ¼������classes.dex(�����˾͸�����ʾ�����ͺ�)</strong></p>
<p><strong>Ȼ�����ǽ�classes.dexѹ��ΪHelloWorld.zip</strong></p>
<p><strong>���Ե�ʱ��Ҫ��֤��������һ���ֻ�(��Root)������һ��ģ����</strong></p>
<p><strong>ִ��adb push HelloWorld.zip /data/local/ </strong></p>
<p><strong>�е�ͯЬ���ܻᱨ������������</strong></p>
<figure class="highlight subunit"><table><tr><td class="code"><pre><div class="line">adb server version (31) doesn't match this client (39)</div><div class="line">* daemon started successfully * </div><div class="line"><span class="keyword">error: </span>no devices/emulators found</div></pre></td></tr></table></figure>
<p><strong>ԭ�����°�adb����,�������ؾɰ���adb�þɰ���adb���м���</strong></p>
<p><strong>����,ִ��adb shell dalvikvm -cp /data/local/HelloWorld.zip HelloWorld�Ϳ�����,��ͼ</strong></p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://img.blog.csdn.net/20170414185954352?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvUmVkV29sZkNoYW8=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="����дͼƬ����" title="">
                </div>
                <div class="image-caption">����дͼƬ����</div>
            </figure>
<p><a href="http://download.csdn.net/detail/redwolfchao/9814373" target="_blank" rel="external">������Smali.jar</a></p>
<p><a href="http://download.csdn.net/detail/redwolfchao/9814423" target="_blank" rel="external">�����Ǿɰ���adb</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;###���ֱ�дһ��Smail���͵�HelloWord###&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;��ʼ��д&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;��Ҫֱ�Ӹ���,Ҫһ��һ���ַ���,����û������!!&lt;/strong&gt;&lt;br&gt;&lt;strong
    
    </summary>
    
    
      <category term="Android����" scheme="http://joryhe.coding.me/tags/Android%EF%BF%BD%EF%BF%BD%EF%BF%BD%EF%BF%BD/"/>
    
  </entry>
  
  <entry>
    <title>��׿�ƶ�����(��)-Android Dalvik������</title>
    <link href="http://joryhe.coding.me/post/%E5%AE%89%E5%8D%93%E7%A7%BB%E5%8A%A8%E9%80%86%E5%90%91(%E4%B8%89)-Android%20Dalvik%E8%99%9A%E6%8B%9F%E6%9C%BA.html"/>
    <id>http://joryhe.coding.me/post/安卓移动逆向(三)-Android Dalvik虚拟机.html</id>
    <published>2017-05-03T05:13:13.000Z</published>
    <updated>2017-05-10T09:27:37.239Z</updated>
    
    <content type="html"><![CDATA[<p><strong>���Ҷ�֪��Java������������Java��������,Android������?</strong><br><strong>��ȻAndroidƽ̨ʹ��Java����������Ӧ�ó���,����Android����ȴ���������ڱ�׼��Java�������ϵ�. GoogleΪAndroidƽ̨ר��������һ��������������Android����–Dalvik Virtual Machine,Ҳ����Dalvik��������</strong></p>
<p><strong>��ƪ����:</strong></p>
<ul>
<li>ɨäDalvik������</li>
<li><strong>�˽�Smail���﷨,�ܶ���Smail�ļ�</strong></li>
</ul>
<p>###Dalvik����###</p>
<p>####Dalvik���ص�(������JVM)####</p>
<ul>
<li>����С,ռ���ڴ�С;</li>
<li>ר�е�DEX��ִ���ļ���ʽ,������С,ִ���ٶȸ���;</li>
<li>�����ز���32λ����ֵ,Ѱַ�෽����,�ֶ���,��������;</li>
<li>���ڼĴ����ܹ�,��ӵ��һ�����ɵ�ָ��ϵͳ</li>
<li>�ṩ�˶����������ڹ���,��ջ����,�̹߳���,��ȫ���쳣�����Լ��������յ���Ҫ����;</li>
<li>���е�Android������������Androidϵͳ������,ÿ�����̶�Ӧ��һ��Dalvik������ʵ��;</li>
</ul>
<hr>
<p>####Dalvik��������Java������������####</p>
<ol>
<li>Java���������е�Java�ֽ���,Dalvik���������е���Dalvik�ֽ���</li>
<li><p><strong>Dalvik��ִ���ļ���������С</strong><br>��������:<br>SDK����һ������dx�Ĺ��߸�����Java�ֽ���ת��ΪDalvik�ֽ���.dx���߶�Java���ļ���������,���������ļ��г��ֵ�����������Ϣ,�����������ڳ�ʼ��ʱ�����ظ����ļ���������������.</p>
<p>�ٸ�����:<br>��Java���д������ַ��������ڶ������ļ��б��ظ�ʹ��,��Щ������Ϣ��ֱ�������ļ�������,ͬ��Ҳ������Ӱ�������������ļ���Ч��.dx��������������������ר�ŵĴ���,��������Java���ļ��еĳ����ؽ��зֽ�,�������е�������Ϣ,�������ϳ�һ��������,���е����ļ�����ͬһ��������.dx����ת��������ͼ��ʾ,����dx���߶Գ����ص�ѹ��,�ǵ���ͬ���ַ���,������DEX�ļ���ֻ����һ��,�Ӷ���С���ļ�������.</p>
</li>
</ol>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://img.blog.csdn.net/20170413150832180?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvUmVkV29sZkNoYW8=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="dx����ת������" title="">
                </div>
                <div class="image-caption">dx����ת������</div>
            </figure>
<ol>
<li><p><strong>Java��������Dalvik�������ܹ���ͬ</strong></p>
<p>����˵һ��:Java����������ջ�ܹ�,Dalvik���ڼĴ����ܹ�;</p>
</li>
</ol>
<hr>
<p>###Dalvikָ����ʽ###</p>
<p><strong>һ��Dalvik����������һϵ�е�Dalvikָ������,ָ���﷨��ָ����λ������ָ����ʽ��ʶ������.λ����Լ������</strong></p>
<ul>
<li>ÿ16λ���ֲ��ÿո��ָ��;</li>
<li>ÿ����ĸ��ʾ��λ,ÿ����ĸ��˳���Ӹ��ֽڿ�ʼ,���е����ֽ�.ÿ��λ֮��<strong>����</strong>������”|”����ʾ��ͬ������;</li>
<li>˳������A-Z�ķ�����д��ĸ��Ϊһ��4λ�Ĳ�����,op��ʾһ��8λ�Ĳ�����;</li>
<li>“?”����ʾ�����ֶε�����λΪ0ֵ;</li>
</ul>
<p><strong>����</strong><br>  “A|B|op BBBB F|E|D|C”<br>  ָ���м��������ո�,ÿ���ֿ��Ĳ�����16λ,����3��16λ��������ָ��;<br>  ��һ��16λ��”A|B|op” ��8λ��A��B����,���ֽ��ɲ�����op����;<br>  �ڶ���16λ��BBBB����,����ʾһ��16λ��ƫ��ֵ;<br>  ������16λ�ֱ���F,E,D,C���ĸ��ֽ�����,���������Ǳ�ʾ�Ĵ����Ĳ���.</p>
<p><strong>����ʹ��λ��ʶ���޷�ȷ��һ��ָ������˼,����ͨ��ָ����ʽ��ʶ��ָ��ָ���ĸ�ʽ����,Լ������</strong></p>
<ul>
<li>ָ����ʽ��ʶ�����������ַ�����,ǰ����������,����һ������ĸ;</li>
<li>��һ������ʽ��ʶָ���ɶ��ٸ�16λ��������;</li>
<li>�ڶ������ֱ�ʶָ������ʹ�üĴ����ĸ���,��������”r”��ʶʹ��һ����Χ�ڵļĴ���;</li>
<li>��������ĸΪ������,��ʶָ���õ��Ķ������ݵ�����,����ͼ:</li>
<li><p>����һ������������ ��ĩβ���ܻ���������һ����ĸ,������”s”��ʾָ�����þ�̬����,������”i”��ʾָ��Ӧ�ñ���������.</p>
<p><img src="http://img.blog.csdn.net/20170413152723245?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvUmVkV29sZkNoYW8=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="ָ����ʽ��ʶ��������"></p>
</li>
</ul>
<p><strong>����</strong></p>
<p>“22x” ��������Ϣ���Զ���</p>
<ol>
<li>ָ����2��16λ������</li>
<li>ָ��ʹ��2���Ĵ���</li>
<li>û��ʹ�õ�����������</li>
</ol>
<p><strong>����,Dalvikָ�����﷨����һЩ˵��,Լ������</strong></p>
<ul>
<li>ÿ��ָ���Ӳ����뿪ʼ,������������,������������,ÿ������֮�����ö��ŷֿ�;</li>
<li>ÿ��ָ���Ĳ�����ָ���ĵ�һ���ֿ�ʼ,opλ�ڵ�8λ,��8λ������һ��8λ�Ĳ���Ҳ����������4λ�Ĳ���,������Ϊ��.����ָ���16λ,�������Ĳ���������Ϊ����;</li>
<li>��������ʹ��”vX”�ķ�ʽ��ʶ,��������һ���Ĵ���,��v0,v1��;</li>
<li>������������”#+X”�ķ�ʽ,��������һ����������;</li>
<li>������������”+X”�ķ�ʽ,��������һ������ָ���ĵ�ַƫ��;</li>
<li>������������”kind@X”�ķ�ʽ,��������һ������������ֵ.����kind��ʾ����������,����string@BBBB,��ʾ�ľ����ַ�������������BBBB;</li>
</ul>
<p><strong>����</strong><br>“op vAA string@BBBB”<br>��8λΪ��,�õ�1���Ĵ�������vAA,���õ�һ���ַ�������������BBBB;</p>
<hr>
<p>###Dalvik�Ĵ���###</p>
<p><strong>ɨä������,��ʼ�ص���</strong></p>
<p>####Dalvik�ֽ���������,����,���ֶα�ʾ����####</p>
<ol>
<li><strong>����</strong><br>Dalvik�ֽ���ֻ����������,����������,������˵,��ͼ;<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://img.blog.csdn.net/20170413155625862?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvUmVkV29sZkNoYW8=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="����" title="">
                </div>
                <div class="image-caption">����</div>
            </figure>
ÿ��Dalvik�Ĵ�������32λ��С,����С�����ߵ���32λ���ȵ�������˵,һ���Ĵ����Ϳ��Դ��Ÿ����͵�ֵ,����J(long),D(double)��64λ������,���ǵ�ֵ��ʹ�����������Ĵ������洢��,v0��v1����vN��vN+1��;<br>L�ͺ�������,��ʾ�κ�һ��Java��,��Dalvik����������,������” Lpackage/name/ObjectName; “��ʾ,ע������һ���ֺ�,����” Ljava/lang/String;”�൱��String;<br>[���;������е�����,[���������������͵�������,��[I��ʾһ������һά����,-&gt;int[],[[I��ʾint[][]&lt;—&gt; [Ljava/lang/String; ��ʾ�������� String [];</li>
<li><strong>����</strong><br>Dalvikʹ�÷�����,���Ͳ����뷵��ֵ������һ������;<br>��ʽ����:<br>Lpackage/name/ObjectName;-&gt;MethodName(III)Z<br>˵��:<br>Lpackage/name/ObjectName;��һ������;<br>MethodName������<br>(III)����,����int����<br>Z����ֵvoid<br><strong>����</strong><br>method(I[[IILjava/lang/String;[Ljava/lang/String;)Ljava/lang/String;<br>�ȿ�,����������֪ʶ,����ת��ΪJava��ʽ�Ĵ���Ϊ:<br>String method(int ,int[][],String,String[])</li>
<li><strong>�ֶ�</strong><br>�ֶκͷ���������,����û�в����ͷ���ֵ,ȡ����֮�����ֶε�����,��ʽ����<br>Lpackage/name/ObjectName;-&gt;FieldName:TYPE<br>˵��:<br>Lpackage/name/ObjectName;��һ������;<br>FieldName�ֶ���<br>TYPE�ֶ�����<br>FieldName��TYPE��ð�Ÿ���<br><strong>����</strong><br>name:Ljava/lang/String;<br>ת��:<br>String name;<br><strong>Dalvik�����е��ֶδ�����.fieldָ�ͷ,�����ֶ����Ͳ�ͬ,���ֶ�ָ���Ŀ�ʼ,���ܻ��õ�����”#”����ע��</strong>;</li>
</ol>
<hr>
<p>###Dalvikָ�###</p>
<p>####ָ���ص�####</p>
<p>Dalvikָ���ڵ��ø�ʽ��ģ����C���Եĵ���Լ��.Dalvikָ���﷨�����ʷ��������ص�:</p>
<ul>
<li>�������ô�Ŀ��(destination)��Դ(source)�ķ�ʽ;</li>
<li>�����ֽ����Ĳ�����ѡ���Ĳ�ͬ,һЩ�ֽ����������ֽ�����׺��������,��Щ��׺ͨ�����ֽ��������ƺ�����б��”/“���ָ���;</li>
<li>��ָ���������,����ֵ�е�ÿ����ĸ��ʾ����Ϊ4λ;</li>
<li>�����ֽ����Ĵ�С�����͵Ĳ�ͬ,һЩ�ֽ������������ƺ�׺����������:<ul>
<li>32λ�������͵��ֽ���,δ�����κκ�׺;</li>
<li>64λ�������͵��ֽ�����-wide��׺;</li>
<li>�������͵��ֽ������ݾ����������Ӻ�׺,���ǿ�����-boolean,-byte,-char,-short,-int,-long,-float,-double,-object,-string,-class,-void֮һ;</li>
</ul>
</li>
</ul>
<p><strong>����</strong><br>“move-wide/from16 vAA,vBBBB”</p>
<p>moveΪ�����ֽ���.��ʶ���ǻ�������;<br>wideΪ���ƺ�׺.��ʶָ�����������ݿ���(64λ);<br>from16λ�ֽ�����׺.��ʶԴΪһ��16λ�ļĴ������ñ���;<br>vAAΪĿ�ļĴ���,��ʼ����Դ��ǰ�� ȡֵ��ΧΪv0-v2^8-1(255);<br>vBBBBΪԴ�Ĵ���,ȡֵ��ΧΪv0-v2^16-1(65535)</p>
<p><strong>�ղ���ָ��</strong></p>
<p>�ղ���ָ�������Ƿ�Ϊnop,����ֵ��00,ͨ��nopָ��ù�����������;,ûɶ����;</p>
<p><strong>���ݲ���ָ��</strong></p>
<p>���ݲ���ָ��Ϊ<strong>move</strong>.moveָ����ԭ��Ϊmove destination,source����move destination,moveָ�������ֽ����Ĵ�С�����Ͳ�ͬ,���������ϲ�ͬ�ĺ�׺.<br><strong>����(��ʾ̫��ֱ����ͼ,�����)</strong></p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://img.blog.csdn.net/20170413171403627?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvUmVkV29sZkNoYW8=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="���ݲ���ָ��" title="">
                </div>
                <div class="image-caption">���ݲ���ָ��</div>
            </figure>
<p><strong>����ָ��</strong></p>
<p>����ָ��ָ���Ǻ�����βʱ���е�����һ��ָ��.���Ļ����ֽ���λ<strong>return</strong>,����������������ָ��<br><strong>����</strong></p>
<ol>
<li>“return-void” ����һ��void</li>
<li>“return vAA” ����һ��32λ�Ƕ������͵�ֵ,����ֵ�Ĵ���λ8λ�ļĴ���vAA;</li>
<li>“return-wide vAA” ����һ��64λ�Ƕ������͵�ֵ,����ֵ�Ĵ���λ8λ�ļĴ���vAA;</li>
<li>“return-object vAA” ����һ���������͵�ֵ,����ֵ�Ĵ���λ8λ�ļĴ���vAA;</li>
</ol>
<p><strong>���ݶ���ָ��</strong></p>
<p>���ݶ���ָ�����������������õ��ı���,�ַ���,��������,���Ļ����ֽ���Ϊ<strong>const</strong><br><strong>����(��ʾ̫��ֱ����ͼ-_-)</strong><br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://img.blog.csdn.net/20170413172400594?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvUmVkV29sZkNoYW8=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="����дͼƬ����" title="">
                </div>
                <div class="image-caption">����дͼƬ����</div>
            </figure><br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://img.blog.csdn.net/20170413172418327?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvUmVkV29sZkNoYW8=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="����дͼƬ����" title="">
                </div>
                <div class="image-caption">����дͼƬ����</div>
            </figure></p>
<p><strong>��ָ��</strong></p>
<p>��ָ�������ڶ��̳߳����ж�ͬһ�����Ĳ���,Dalvikָ�����������ָ��.</p>
<ol>
<li>“monitor-enter vAA” Ϊָ���Ķ�����ȡ��</li>
<li>“monitor-exit vAA”Ϊָ���Ķ����ͷ���</li>
</ol>
<p><strong>ʵ������ָ��</strong></p>
<p>��ʵ�����صĲ�������ʵ�������ʹ���,���鼰�½���;</p>
<ul>
<li>“check-case vAA,type@BBBB” ��vAA�еĶ�������ǿתΪBBBB����;</li>
</ul>
<figure class="highlight lisp"><table><tr><td class="code"><pre><div class="line">(<span class="name">BBBB</span>)vAA<span class="comment">;</span></div></pre></td></tr></table></figure>
<ul>
<li>“instance-of vA,vB,type@CCCC” �ж�vB�еĶ��������Ƿ���ת��CCCC����,��vA=1,����vA=0;</li>
</ul>
<figure class="highlight aspectj"><table><tr><td class="code"><pre><div class="line"><span class="keyword">if</span>(vB.<span class="keyword">instanceof</span>(type<span class="meta">@CCCC</span>))&#123;</div><div class="line">	vA =<span class="number">1</span>;</div><div class="line">&#125;<span class="keyword">else</span>&#123;</div><div class="line">	vA = <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>“new-instance vAA,type@BBBB” �½�һ��BBBB�Ķ���vAA,BBBB����Ϊ����</li>
</ul>
<figure class="highlight ebnf"><table><tr><td class="code"><pre><div class="line"><span class="attribute">BBBB vAA</span> = new BBBB();</div></pre></td></tr></table></figure>
<ul>
<li>“check-cast/jumbo vAAAA,type@BBBBBBBB” ��”check-case vAA,type@BBBB”������ͬ,ֻ��ȡֵ��Χ����(Android 4.0����)</li>
<li>“instance-of/jumbo vAAAA,vBBBB,type@CCCCCCCC”��”instance-of vAA,vBB,type@CCCC”������ͬ,ֻ��ȡֵ��Χ����(Android 4.0����)</li>
<li>“new-instance/jumbo vAAAA,type@BBBBBBBB”��”new-instance vAA,type@BBBB”������ͬ,ֻ��ȡֵ��Χ����(Android 4.0����)</li>
</ul>
<p><strong>��������ָ��</strong></p>
<p>��������������ȡ���鳤��(ָ������������Ŀ����),�½�����,���鸳ֵ,����Ԫ��ȡֵ�븳ֵ�Ȳ���;</p>
<ul>
<li>“array-length vA,vB” </li>
</ul>
<figure class="highlight abnf"><table><tr><td class="code"><pre><div class="line"><span class="attribute">vA</span> = vB.length<span class="comment">; //	��vB�ĳ��ȸ�ֵ��vA</span></div></pre></td></tr></table></figure>
<ul>
<li>“new-array vA,vB,type@CCCC”</li>
</ul>
<figure class="highlight abnf"><table><tr><td class="code"><pre><div class="line"><span class="attribute">vA</span> = CCCC[vB]<span class="comment">; //	����һ��vB����CCCC���͵����鸳ֵ��vA</span></div></pre></td></tr></table></figure>
<ul>
<li>�����ĸ�ͼ<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://img.blog.csdn.net/20170413174546498?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvUmVkV29sZkNoYW8=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="����дͼƬ����" title="">
                </div>
                <div class="image-caption">����дͼƬ����</div>
            </figure>
</li>
</ul>
<p><strong>�쳣ָ��</strong></p>
<p>Dalvik ָ�����һ��ָ�������׳��쳣</p>
<ul>
<li>“throw vAA” �׳�vAA�Ĵ�����ָ�����͵��쳣</li>
</ul>
<p><strong>��תָ��</strong></p>
<p>Dalvikָ�����������תָ��:��������ת(goto),��֧��ת(switch),������ת(if)</p>
<ul>
<li>“goto +AA” ��������ת��ָ��ƫ�ƴ�,ƫ����AA����Ϊ0;</li>
<li>“goto/16+AAAA” ��������ת��ָ��ƫ�ƴ�,ƫ����AAAA����Ϊ0;</li>
<li>“goto/32+AAAAAAAA” ��������ת��ָ��ƫ�ƴ�;</li>
<li>“packed-switch vAA,+BBBBBBBB” ��֧��תָ��. vAA�Ĵ���Ϊswitch��֧����Ҫ�жϵ�ֵ��(switch(vAA)),BBBBBBBBָ��һ��packed-switch-payload��ʽ��ƫ�Ʊ�,���е�ֵ�ǹ��ɵ�����.(����ô��ס�ͺ�,����Ȥ�����Ұٶ�..)</li>
<li>“sparse-switch vAA,+BBBBBBBB”��֧��תָ��,vAA�Ĵ���Ϊswitch��֧����Ҫ�жϵ�ֵ��(switch(vAA)),BBBBBBBBָ��һ��sparse-switch-payload��ʽ��ƫ�Ʊ�,���е�ֵ���޹��ɵ�ƫ����.</li>
<li>“if-test vA,vB,+CCCC” ������תָ��,�Ƚ�vA��vB��ֵ,�����ȽϽ�����������ת��CCCCָ����ƫ�ƴ�,ƫ����CCCC����Ϊ0,if-test���͵�ָ�������¼���:<ul>
<li>��if-eq vA, vB, :cond_xx�� ����vA����vB����ת��:cond_xx </li>
<li>��if-ne vA, vB, :cond_xx�� ����vA������vB����ת��:cond_xx </li>
<li>��if-lt vA, vB, :cond_xx�� ����vAС��vB����ת��:cond_xx </li>
<li>��if-ge vA, vB, :cond_xx�� ����vA���ڵ���vB����ת��:cond_xx </li>
<li>��if-gt vA, vB, :cond_xx�� ����vA����vB����ת��:cond_xx </li>
<li>��if-le vA, vB, :cond_xx�� ����vAС�ڵ���vB����ת��:cond_xx </li>
</ul>
</li>
<li>“if-testz vAA,+BBBB”������תָ��,��vAA��0���Ƚ�,�����������߲�������������ת��BBBB��ָ��ƫ�ƴ�BBBB����Ϊ0, if-testz���͵�ָ�������¼���:<ul>
<li>��if-eqz vA, :cond_xx�� ����vA����0����ת��:cond_xx </li>
<li>��if-nez vA, :cond_xx�� ����vA������0����ת��:cond_xx </li>
<li>��if-ltz vA, :cond_xx�� ����vAС��0����ת��:cond_xx </li>
<li>��if-gez vA, :cond_xx�� ����vA���ڵ���0����ת��:cond_xx </li>
<li>��if-gtz vA, :cond_xx�� ����vA����0����ת��:cond_xx </li>
<li>��if-lez vA, :cond_xx�� ����vAС�ڵ���0����ת��:cond_xx</li>
</ul>
</li>
</ul>
<p><strong>�Ƚ�ָ��</strong></p>
<p>�Ƚ�ָ�����ڶ������Ĵ�����ֵ(�����ͻ��߳�����)���бȽϸ�ʽΪ:<br>“cmpkind vAA,vBB,vCC” </p>
<p>Dalvikָ��й���5���Ƚ�ָ��:</p>
<ul>
<li><p>“cmpl-float” �Ƚ�����floatֵ;</p>
<figure class="highlight nix"><table><tr><td class="code"><pre><div class="line"><span class="keyword">if</span>(<span class="attr">vBB</span> == vCC)&#123;</div><div class="line">	<span class="attr">vAA</span> =<span class="number">0</span>;</div><div class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(vBB&gt;vCC)&#123;</div><div class="line">	<span class="attr">vAA</span> = -<span class="number">1</span>;</div><div class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(vBB&lt;vCC&gt;)&#123;</div><div class="line">	<span class="attr">vAA</span> = <span class="number">1</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>“cmpg-float” �Ƚ�����float��ֵ</p>
<figure class="highlight nix"><table><tr><td class="code"><pre><div class="line"><span class="keyword">if</span>(<span class="attr">vBB</span> == vCC)&#123;</div><div class="line">	<span class="attr">vAA</span> =<span class="number">0</span>;</div><div class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(vBB&lt;vCC)&#123;</div><div class="line">	<span class="attr">vAA</span> = -<span class="number">1</span>;</div><div class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(vBB&gt;vCC&gt;)&#123;</div><div class="line">	<span class="attr">vAA</span> = <span class="number">1</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>��cmpg����cmpʱ,B &gt; CʱA = 1,��֮-1;��cmplʱ,B &gt; CʱA = -1��֮1;</strong></p>
<ul>
<li>“cmpg-double” �Ƚ�����double��ֵ</li>
<li>“cmpl-double” �Ƚ�����double��ֵ</li>
<li>“cmp-long” �Ƚ�����long��ֵ</li>
</ul>
<p><strong>�ֶβ���ָ��</strong></p>
<p>�ֶβ���ָ�������Զ���ʵ�����ֶν��ж�д����.<br>�ֶε����Ϳ�����Java����Ч����������,����ͨ�ֶ��뾲̬�ֶβ���������ָ�,�ֱ���”iinstanceop vA,vB,field@CCCC”��”sstaticop vAA,field@BBBB”.<br>��Android 4.0ϵͳ��,��”iinstanceop /jumbovAAAA,vBBBB,field@CCCCCCCC”��”sstaticop/jumbo vAAAA,field@BBBBBBBB”.������������������ͬ,ֻ�Ǽ���jmpbo��׺,�Ĵ�����ָ������ȡֵ��Χ����(������ֻ��˵��/jumboָ����׺��ָ�,���þͲ�ָ����)<br>��ͨ�ֶ�ָ����ָ��ǰ׺Ϊi,��.����ͨ�ֶζ�����ʹ��igetָ��,д����ʹ��iputָ��;��̬�ֶε�ָ��ǰ׺Ϊs,��.�Ծ�̬�ֶεĶ�����Ϊsget,д����Ϊsput;<br>���ݷ��ʵ��ֶ����Ͳ�ͬ,�ֶβ���ָ�������������ֶ����͵ĺ�׺,��iget-byteָ����ʾ��ȡʵ���ֶε�ֵ����Ϊbyte;</p>
<p><strong>��������ָ��</strong><br>��������ָ���������ʵ���ķ���,���Ļ���ָ��Ϊinvoke,��������ָ����”invoke-kind{vC,vD,vE,vF,vG},meth@BBBB”��”invoke-kind/range{vCCCC…VNNNN},meth@BBBB”����,������ָ������ûɶ��ͬ,���������ò����Ĵ���ʱʹ����range��ָ���Ĵ����ķ�Χ,���ݷ������͵Ĳ�ͬ,��������5����������ָ��:</p>
<ol>
<li>“invoke-virtual” ����ʵ�����鷽��</li>
<li>“invoke-super” ����ʵ���ĸ��෽��</li>
<li>“invoke-direct” ����ʵ����ֱ�ӷ���</li>
<li>“invoke-static” ����ʵ���ľ�̬����</li>
<li>“invoke-interface” ����ʵ���Ľӿڷ���<br>Android 4.0��jumbo��ָ�;</li>
</ol>
<p>��������ָ���ķ���ֵ����ʹ��move-result*ָ������ȡ:<br>invoke-static{},Landroid/os/Parcel;-&gt;obtain()Landroid/os/Parcel;<br>move-result-object v0;</p>
<p><strong>����ת��ָ��</strong><br>����ת��ָ�����ڽ�һ�����͵���ֵת��Ϊ��һ������,���ĸ�ʽΪ”unop vA,vB” ��vB�е�������һ������(ת��)����vA��:(�Ƚϼ���,ֱ����ͼ)</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://img.blog.csdn.net/20170413185529172?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvUmVkV29sZkNoYW8=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="����дͼƬ����" title="">
                </div>
                <div class="image-caption">����дͼƬ����</div>
            </figure>
<p><strong>��������ָ��</strong></p>
<p>��������ָ��������������ָ�����߼�����ָ��:</p>
<ul>
<li>��������ָ��:��,��,��,��,ģ,��λ��</li>
<li>�߼�����ָ��:����,��,��,�ֻ���;<br>�ϸ�ͼ��<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://img.blog.csdn.net/20170413185946687?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvUmVkV29sZkNoYW8=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="����дͼƬ����" title="">
                </div>
                <div class="image-caption">����дͼƬ����</div>
            </figure>
���л����ֽ���������-type������-int,-long,-float,-double,����3��ָ��Ҳ���,�Ͳ�����,������ͨ;</li>
</ul>
<p><strong>=<em>= =</em>= =<em>= =</em>= =<em>= =</em>= =<em>= =</em>= =<em>= =</em>= =<em>= =</em>= =<em>= =</em>= =<em>= =</em>= =<em>= =</em>= =<em>= =</em>= =<em>= =</em>= </strong></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;���Ҷ�֪��Java������������Java��������,Android������?&lt;/strong&gt;&lt;br&gt;&lt;strong&gt;��ȻAndroidƽ̨ʹ��Java����������Ӧ�ó���,����Android����ȴ�����
    
    </summary>
    
    
      <category term="Android����" scheme="http://joryhe.coding.me/tags/Android%EF%BF%BD%EF%BF%BD%EF%BF%BD%EF%BF%BD/"/>
    
  </entry>
  
  <entry>
    <title>��׿�ƶ�����(��)</title>
    <link href="http://joryhe.coding.me/post/%E5%AE%89%E5%8D%93%E7%A7%BB%E5%8A%A8%E9%80%86%E5%90%91(%E4%BA%8C).html"/>
    <id>http://joryhe.coding.me/post/安卓移动逆向(二).html</id>
    <published>2017-05-02T04:12:12.000Z</published>
    <updated>2017-05-10T09:26:03.446Z</updated>
    
    <content type="html"><![CDATA[<p>###Сʵ��–�ƽ�һ��С����###</p>
<p><strong>�����ƽ�</strong></p>
<p>�ƽ�Android����ͨ���ķ����ǽ�apk�ļ�����ApkTool������,����Smali��ʽ�ķ���������.Ȼ���Ķ�Smali�ļ��Ĵ������������������л���,�ҵ�������ͻ�ƿڽ����޸�,����ʹ��ApkTool���±�������Apk�ļ���ǩ��,�������в���,����ѭ��,ֱ�����򱻳ɹ��ƽ�.</p>
<p><strong>��Ҫ����</strong></p>
<p> <a href="http://download.csdn.net/detail/redwolfchao/9807486" target="_blank" rel="external">���빤�� : ApkTool</a></p>
<p>ǩ������: SignApk : ���ӣ�<a href="http://pan.baidu.com/s/1miwl6lU" target="_blank" rel="external">http://pan.baidu.com/s/1miwl6lU</a> ���룺ze44</p>
<p>������֮�� ��ѹĿ¼��path�������� �㶮��</p>
<hr>
<p><strong>׼��</strong></p>
<p>�����Ƚ���һ���Լ���App,����������(PS:��Ը���Լ�����Դ������)</p>
<p><a href="http://download.csdn.net/detail/redwolfchao/9807302" target="_blank" rel="external">���ƽ�����</a></p>
<p>���ܾ��Ǹ����������û�������ע����,�ж�������ע������ϵͳ�㷨���ɵ�ע�����Ƿ�һ��,һ����ע���ɹ�,��������,�����򲻿���;</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://img.blog.csdn.net/20170407190037293?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvUmVkV29sZkNoYW8=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="����" title="">
                </div>
                <div class="image-caption">����</div>
            </figure>
<p><strong>�������Ĵ���</strong></p>
<figure class="highlight pony"><table><tr><td class="code"><pre><div class="line">findViewById(<span class="type">R</span>.id.act_main_btn).setOnClickListener(<span class="function"><span class="keyword">new</span> <span class="title">View</span>.<span class="title">OnClickListener</span>() &#123;</span></div><div class="line">    @<span class="title">Override</span></div><div class="line">    <span class="title">public</span> <span class="title">void</span> <span class="title">onClick</span>(<span class="type">View</span> v) &#123;</div><div class="line">        <span class="title">String</span> <span class="title">userName</span> = <span class="title">etUser</span>.<span class="title">getText</span>().<span class="title">toString</span>().<span class="title">trim</span>();</div><div class="line">        <span class="title">String</span> <span class="title">sn</span> = <span class="title">etSN</span>.<span class="title">getText</span>().<span class="title">toString</span>().<span class="title">trim</span>();</div><div class="line">        <span class="title">if</span> (checkSN(userName, sn)) &#123;</div><div class="line">            <span class="title">Toast</span>.<span class="title">makeText</span>(<span class="type">MainActivity</span>.this, <span class="type">R</span>.string.string_register, <span class="type">Toast</span>.<span class="type">LENGTH_SHORT</span>).<span class="title">show</span>();</div><div class="line">            <span class="title">tvTitle</span>.<span class="title">setText</span>(<span class="type">R</span>.string.string_success_register);</div><div class="line">        &#125; <span class="title">else</span> &#123;</div><div class="line">            <span class="title">Toast</span>.<span class="title">makeText</span>(<span class="type">MainActivity</span>.this, <span class="type">R</span>.string.string_unregister, <span class="type">Toast</span>.<span class="type">LENGTH_SHORT</span>).<span class="title">show</span>();</div><div class="line">        &#125;</div><div class="line"></div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<hr>
<p><strong>��ʼ�ƽ�</strong></p>
<p>����������Ҫ��apktool d appname.apk  ���з�����  ��ͼ</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://img.blog.csdn.net/20170407190405811?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvUmVkV29sZkNoYW8=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="������" title="">
                </div>
                <div class="image-caption">������</div>
            </figure>
<p>Ȼ��������һ��appName���ļ��� �������� ��Щsmali���ļ���</p>
<p>֮�����ǵ�Ŀ�� ���ҵ�ͻ�ƿ�,ʲô��ͻ�ƿ�? </p>
<p><strong><em>����Button֮������ʾ���־���ͻ�ƿ�</em></strong></p>
<p>���ǽ���values�е�string.xml���ҿ�</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://img.blog.csdn.net/20170407190631738?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvUmVkV29sZkNoYW8=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt=".." title="">
                </div>
                <div class="image-caption">..</div>
            </figure>
<p><strong>����Android����ʱ,String.xml�ļ��е������ַ�����Դ����”gen/<packagename>/R.java”�ļ���String���б���ʶ,ÿ���ַ�������Ψһ��int��������ֵ,ʹ��ApkTool������Apk�ļ���,���е�����ֵ������string.xml�ļ�ͬĿ¼�µ�public.xml��</packagename></strong></p>
<p>����string_unregister��public.xml��</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://img.blog.csdn.net/20170408091202516?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvUmVkV29sZkNoYW8=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="����дͼƬ����" title="">
                </div>
                <div class="image-caption">����дͼƬ����</div>
            </figure>
<p>���Ƿ���string_unregister����Ӧ��idΪ 0x7f060027 </p>
<p><strong>����˵��Ҫȫ������smali�ļ����а���0x7f060027�ļ���λ��,����֪������MainActivity��������,ֱ�ӽ��뼴��(PS:����,�Ҳ�֪������ȫ�������ļ��ڵ�����)</strong></p>
<p>���ǽ���MainActivity$1.smali����0x7f060027   ��ͼ</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://img.blog.csdn.net/20170408091511625?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvUmVkV29sZkNoYW8=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="����дͼƬ����" title="">
                </div>
                <div class="image-caption">����дͼƬ����</div>
            </figure>
<p>��������</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://img.blog.csdn.net/20170408091635813?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvUmVkV29sZkNoYW8=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="����дͼƬ����" title="">
                </div>
                <div class="image-caption">����дͼƬ����</div>
            </figure>
<p><strong>��ͼ�޸�֮��,���ǽ���app�ļ���,�ٴα�����������dist������һ��app,��������ǩ��(��ǩ�����޷����в��Ե�) ��ͼ</strong></p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://img.blog.csdn.net/20170408091706813?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvUmVkV29sZkNoYW8=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="����дͼƬ����" title="">
                </div>
                <div class="image-caption">����дͼƬ����</div>
            </figure>
<p><strong>Ȼ�����ǽ���ǩ��,���������ص�signapk����,����-&gt;��ǩ����App  ��ͼ</strong><br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://img.blog.csdn.net/20170408091805963?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvUmVkV29sZkNoYW8=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="����дͼƬ����" title="">
                </div>
                <div class="image-caption">����дͼƬ����</div>
            </figure></p>
<p><strong>����֮�� ���ǿ���ͨ��adb install signed.apk ��װ���ֻ����� Ҳ���Ը��Ƶ��ֻ���ֱ�Ӱ�װ,Ŷ,���ܻᱨ��</strong></p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://img.blog.csdn.net/20170408092231782?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvUmVkV29sZkNoYW8=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="����дͼƬ����" title="">
                </div>
                <div class="image-caption">����дͼƬ����</div>
            </figure>
<p><strong>���ֻ��ϵ���ͬAppж���˼���</strong></p>
<p><strong>��װ֮��,��������</strong></p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://img.blog.csdn.net/20170408092410582?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvUmVkV29sZkNoYW8=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="����дͼƬ����" title="">
                </div>
                <div class="image-caption">����дͼƬ����</div>
            </figure>
<p>�ο��鼮: <a href="http://download.csdn.net/detail/redwolfchao/9807301" target="_blank" rel="external">Android������ȫ����������</a> </p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;###Сʵ��–�ƽ�һ��С����###&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;�����ƽ�&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;�ƽ�Android����ͨ���ķ����ǽ�apk�ļ�����ApkTool������,����Smali��ʽ�ķ���������.Ȼ�
    
    </summary>
    
    
      <category term="Android����" scheme="http://joryhe.coding.me/tags/Android%EF%BF%BD%EF%BF%BD%EF%BF%BD%EF%BF%BD/"/>
    
  </entry>
  
  <entry>
    <title>��׿�ƶ�����(ɨä)</title>
    <link href="http://joryhe.coding.me/post/%E5%AE%89%E5%8D%93%E7%A7%BB%E5%8A%A8%E9%80%86%E5%90%91(%E6%89%AB%E7%9B%B2).html"/>
    <id>http://joryhe.coding.me/post/安卓移动逆向(扫盲).html</id>
    <published>2017-05-01T03:11:11.000Z</published>
    <updated>2017-05-10T09:26:34.367Z</updated>
    
    <content type="html"><![CDATA[<p>###Android ���� ###</p>
<p><strong>ûɶ��˵��,��ɨһ��ä</strong></p>
<hr>
<p>###APK ���� ###</p>
<p><strong>asset�ļ��У�</strong><br><strong>��ԴĿ¼1��asset��res������ԴĿ¼���������𣬼�����˵��</strong><br><strong>lib�ļ��У�  so������λ�ã�һ����NDK�����õ���������ʹ����Ϸ������JNI native���õĹ�����</strong><br><strong>res�ļ��� ����ԴĿ¼2��asset��res������ԴĿ¼���������𣬼�����˵��</strong><br><strong>classes.dex  ��Java���������õ���Dalvik VM��ֱ��ִ�е��ļ��������н���</strong></p>
<p><strong>resĿ¼�µ���Դ�ļ��ڱ���ʱ���Զ����������ļ���R.java������Java��������R.xxx.yyy�����ã�</strong><br><strong>��assetĿ¼�µ���Դ�ļ�����Ҫ������������Java��������Ҫ��AssetManager�����ʣ�</strong></p>
<p><strong>һ����˵��������Ƶ����Ƶ��Դ����Ҫ����raw��asset�£���ʹ��Java������Android����ʹ�õ�����Դ�ļ���������res�£�ʹ��C++��Ϸ���棨��ʹ��Lua Unity3D�ȣ�����Դ�ļ�����Ҫ����asset�¡�</strong></p>
<hr>
<p>###Dalvik �ֽ��� ###</p>
<p><strong>Dalvik�ֽ�����ʲô��</strong></p>
<p>Dalvik�ֽ�����ѧϰ�ƽ��Ļ���������������Ҫ�˽�һ��</p>
<p>Dalvik��googleר��ΪAndroid����ϵͳ���Ƶ�һ�����������������ȵ��Ż�����ȻAndroid�ϵĳ�����ʹ��java�������ģ�����Dalvik�ͱ�׼��java������JVM���������¡�Dalvik VM�ǻ��ڼĴ����ģ���JVM�ǻ���ջ�ģ�Dalvik��ר�����ļ�ִ�и�ʽdex��dalvik executable������JVM��ִ�е���java�ֽ��롣Dalvik VM��JVM�ٶȸ��죬ռ�ÿռ����١�</p>
<p>ͨ��Dalvik���ֽ������ǲ���ֱ�ӿ���ԭ�����߼����룬��ʱ��Ҫ������Apktool��dex2jar+jd-gui�����������鿴�����ǣ�ע���������������޸�APK��Ҫ�������ļ���.smali�ļ��������ǵ�������Java�ļ����±��롣</p>
<hr>
<p>###Smali–�ƽ�������֮��###</p>
<p><strong>ʲô��Smali��</strong></p>
<p><strong>Smali��Baksmali�ֱ���ָ��׿ϵͳ����Java��������Dalvik����ʹ�õ�һ�֡�dex��ʽ�ļ��Ļ��������������������﷨��һ�ֿ���ʽ��Jasmin/dedexer�﷨��������ʵ����.dex��ʽ���й��ܣ�ע�⣬������Ϣ����·��Ϣ�ȣ�</strong></p>
<p><strong>�����Ƕ�APK�ļ����з������󣬱������ɴ������ļ���С���ڴ˶�smali�ļ����м�Ҫ�Ľ��ܡ�������Davlik�ֽ����У��Ĵ�������32λ�ģ��ܹ�֧���κ����ͣ�64λ���ͣ�Long/Double����2���Ĵ�����ʾ��Dalvik�ֽ������������ͣ�ԭʼ���ͣ��������ͣ��������������飩</strong></p>
<p><strong><em>ԭʼ����</em></strong></p>
<p>B—byte<br>C—char<br>D—double<br>F—float<br>I—int<br>J—long<br>S—short<br>V—void<br>Z—boolean<br>[XXX—array<br>Lxxx/yyy—object</p>
<p><strong>����������������������ı�ʾ��ʽ�ǣ��ڻ�������ǰ����ǰ�����š�[��������int������float�����ֱ���ʾΪ��[I��[F�������ı�ʾ����L��Ϊ��ͷ����ʽ��LpackageName/objectName;��ע�������и��ֺŸ������󣩣�����String������smali��Ϊ��Ljava/lang/String;������java/lang��Ӧjava.lang����String���Ƕ����ڸð��е�һ��������</strong></p>
<p><strong>���������ʣ���Ȼ������LpackageName/objectName;����ʾ�������������ڲ�����������smali��������?�����ǣ�LpackageName/objectName$$subObjectName;��Ҳ�������ڲ���ǰ�ӡ�$�����ţ����ڡ�$�����Ÿ����Ĺ������ں���̸����</strong></p>
<p><strong>�����Ķ���һ��Ϊ��     Func-Name (Para-Type1Para-Type2Para-Type3…)Return-Type     ע������������֮��û���κηָ�����ͬ���ټ������Ӿ����������ˣ�     1. hello ()V         û����������void hello()��     2. hello (III)Z         ��������boolean hello(int, int, int)��     3. hello (Z[I[ILjava/lang/String;J)Ljava/lang/String;         ����������String hello (boolean, int[], int[], String, long) ������</strong></p>
<hr>
<p><strong><em>Smali�����﷨</em></strong></p>
<p>.field private isFlag:z������������<br>.method��������<br>.parameter������������<br>.prologue����������ʼ<br>.line 123�����˷���λ�ڵ�123��<br>invoke-super�������ø�����<br>const/high16  v0, 0x7fo3������0x7fo3��ֵ��v0<br>invoke-direct�������ú���<br>return-void������������void<br>.end method������������<br>new-instance��������ʵ��<br>iput-object����������ֵ<br>iget-object�������ö���<br>invoke-static�������þ�̬����</p>
<p>������ת��֧��</p>
<p>“if-eq vA, vB, :cond_xx”   ����vA����vB����ת��:cond_xx<br>“if-ne vA, vB, :cond_xx”   ����vA������vB����ת��:cond_xx<br>“if-lt vA, vB, :cond_xx”    ����vAС��vB����ת��:cond_xx<br>“if-ge vA, vB, :cond_xx”   ����vA���ڵ���vB����ת��:cond_xx<br>“if-gt vA, vB, :cond_xx”   ����vA����vB����ת��:cond_xx<br>“if-le vA, vB, :cond_xx”    ����vAС�ڵ���vB����ת��:cond_xx<br>“if-eqz vA, :cond_xx”   ����vA����0����ת��:cond_xx<br>“if-nez vA, :cond_xx”   ����vA������0����ת��:cond_xx<br>“if-ltz vA, :cond_xx”    ����vAС��0����ת��:cond_xx<br>“if-gez vA, :cond_xx”   ����vA���ڵ���0����ת��:cond_xx<br>“if-gtz vA, :cond_xx”   ����vA����0����ת��:cond_xx<br>“if-lez vA, :cond_xx”    ����vAС�ڵ���0����ת��:cond_xx</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;###Android ���� ###&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ûɶ��˵��,��ɨһ��ä&lt;/strong&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;###APK ���� ###&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;asset�ļ��У�&lt;/strong&gt;&lt;br&gt;&lt;strong&gt;�
    
    </summary>
    
    
      <category term="Android����" scheme="http://joryhe.coding.me/tags/Android%EF%BF%BD%EF%BF%BD%EF%BF%BD%EF%BF%BD/"/>
    
  </entry>
  
  <entry>
    <title>Lambda表达式--Java 8 新特性</title>
    <link href="http://joryhe.coding.me/post/Lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F.html"/>
    <id>http://joryhe.coding.me/post/Lambda表达式.html</id>
    <published>2017-04-28T02:00:00.000Z</published>
    <updated>2017-04-28T02:58:56.766Z</updated>
    
    <content type="html"><![CDATA[<p>#正文#</p>
<p>Lambda表达式是Java 8中提供的新特性<br>-<br><strong>也就是说,要用这个电脑上的JDK环境要是jdk1.8</strong></p>
<p><strong>Lambda表达式本质上是一种匿名方法(匿名的不能再匿名了)</strong></p>
<p><strong>使用它需要在app/gradle中添加如下配置</strong></p>
<figure class="highlight stylus"><table><tr><td class="code"><pre><div class="line">android &#123;</div><div class="line">    ...</div><div class="line">    defaultConfig &#123;</div><div class="line">        ...</div><div class="line">        <span class="comment">//  Lambda表达式声明</span></div><div class="line">        jackOptions<span class="selector-class">.enabled</span> = true</div><div class="line">    &#125;</div><div class="line">    compileOptions&#123;</div><div class="line">        sourceCompatibility JavaVersion<span class="selector-class">.VERSION_1_8</span></div><div class="line">        targetCompatibility JavaVersion<span class="selector-class">.VERSION_1_8</span></div><div class="line">    &#125;</div><div class="line">    ...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>简单描述一下适用于什么情况</strong></p>
<ul>
<li>某个接口只有一个待实现的方法,就可以用了..看栗子吧</li>
</ul>
<p><strong>先来个容易理解的</strong></p>
<p>线程1</p>
<figure class="highlight lasso"><table><tr><td class="code"><pre><div class="line"><span class="keyword">Thread</span> <span class="keyword">thread</span> = <span class="literal">new</span> <span class="keyword">Thread</span>(<span class="literal">new</span> Runnable() &#123;</div><div class="line">            @Override</div><div class="line">            <span class="keyword">public</span> <span class="literal">void</span> run() &#123;</div><div class="line"></div><div class="line">            &#125;</div><div class="line">        &#125;);</div></pre></td></tr></table></figure>
<p>线程2</p>
<figure class="highlight coffeescript"><table><tr><td class="code"><pre><div class="line">Thread thread1 = <span class="keyword">new</span> Thread(<span class="function"><span class="params">()</span> -&gt;</span> &#123;</div><div class="line"></div><div class="line">        &#125;);</div></pre></td></tr></table></figure>
<p><strong>体会一下,精不精彩,刺不刺激!</strong></p>
<p>…Runnable中只有一个run方法需要实现,所以…</p>
<p><strong>罢了,多看几个例子就懂了</strong></p>
<p>线程3</p>
<figure class="highlight aspectj"><table><tr><td class="code"><pre><div class="line">Runnable runnable = <span class="keyword">new</span> Runnable() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</div><div class="line"></div><div class="line">            &#125;</div><div class="line">        &#125;;</div></pre></td></tr></table></figure>
<p>线程4</p>
<figure class="highlight coffeescript"><table><tr><td class="code"><pre><div class="line">Runnable runnable1 = <span class="function"><span class="params">()</span> -&gt;</span> &#123;</div><div class="line"></div><div class="line">        &#125;;</div></pre></td></tr></table></figure>
<p><strong>无奈 结合一下线程1234咱们可以总结出用法</strong></p>
<ul>
<li>()代替了(接口名)以及方法名,因为本身就一个</li>
<li>-&gt;{}就是方法体</li>
</ul>
<p><strong>如果有参数咋办?</strong></p>
<p>栗子(有参数setOnClickListener)</p>
<p>未使用Lambda<br><figure class="highlight aspectj"><table><tr><td class="code"><pre><div class="line">btn.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</div><div class="line"></div><div class="line">            &#125;</div><div class="line">        &#125;);</div></pre></td></tr></table></figure></p>
<p>使用了Lambda</p>
<figure class="highlight coffeescript"><table><tr><td class="code"><pre><div class="line">btn.setOnClickListener(<span class="function"><span class="params">(View view)</span> -&gt;</span> &#123;</div><div class="line"></div><div class="line">        &#125;);</div></pre></td></tr></table></figure>
<p>或者</p>
<figure class="highlight coffeescript"><table><tr><td class="code"><pre><div class="line">btn.setOnClickListener(<span class="function"><span class="params">(view)</span> -&gt;</span> &#123;</div><div class="line"></div><div class="line">        &#125;);</div></pre></td></tr></table></figure>
<p><strong>参数写在()内,参数类型可以省略,Java会自动识别类型(注:当要实现的方法只有一个参数的时候可以写成下面这个样子,因为只有一个参数)</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><div class="line"><span class="selector-tag">btn</span><span class="selector-class">.setOnClickListener</span>(<span class="selector-tag">v</span> <span class="selector-tag">-</span>&gt; &#123;</div><div class="line"></div><div class="line">        &#125;);</div></pre></td></tr></table></figure>
<p>着实不能再省了</p>
<p><strong>哦 对了 要是有返回值的话,就直接在{}中return即可</strong></p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><div class="line">HaveReturn haveReturn = str -&gt; &#123;</div><div class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">        &#125;;</div><div class="line"><span class="keyword">interface</span> HaveReturn &#123;</div><div class="line">    <span class="built_in">boolean</span> haveReturn(<span class="built_in">String</span> <span class="built_in">string</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>无奈 就可以这么用了,太精简了</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;#正文#&lt;/p&gt;
&lt;p&gt;Lambda表达式是Java 8中提供的新特性&lt;br&gt;-&lt;br&gt;&lt;strong&gt;也就是说,要用这个电脑上的JDK环境要是jdk1.8&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Lambda表达式本质上是一种匿名方法(匿名的不能再匿名了)&lt;/st
    
    </summary>
    
    
      <category term="Java" scheme="http://joryhe.coding.me/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>Material_Design_提供组件</title>
    <link href="http://joryhe.coding.me/post/Material-Design-%E6%8F%90%E4%BE%9B%E7%BB%84%E4%BB%B6.html"/>
    <id>http://joryhe.coding.me/post/Material-Design-提供组件.html</id>
    <published>2017-04-26T02:44:41.000Z</published>
    <updated>2017-04-26T02:45:26.834Z</updated>
    
    <content type="html"><![CDATA[<p>反编译看的实在有点头疼,于是就仔细研究了一下前一段时间的一篇文章Material Design规范,发现这个东西2014年就出来了,为什么我今年才发现呢..无奈.于是乎,读书查资料,撸出一个Demo来;</p>
<p><strong>Demo主要知识点&lt;解释纯属个人见解&gt;</strong></p>
<ol>
<li><p>Toolbar- -&gt;Material Design中推荐用来替代ActionBar的组件</p>
</li>
<li><p>DrawerLayout- -&gt;侧滑菜单的父组件</p>
</li>
<li><p>NavigationView- -&gt;侧滑菜单推荐和DrawerLayout一起组合的使用的菜单组件</p>
</li>
<li><p>FloatingActionButton- -&gt;悬浮按钮</p>
</li>
<li><p>CoordinatorLayout- -&gt;加强版的FrameLayout,拥有部分新特性</p>
</li>
<li><p>Snackbar- -&gt;可交互的Toast(不是替代品)</p>
</li>
<li><p>CardView- -&gt;卡片式布局</p>
</li>
<li><p>AppBarLayout-&gt;Toolbar的父组件,封装部分事件</p>
</li>
<li><p>SwipeRefreshLayout- -&gt;下拉刷新组件</p>
</li>
<li><p>CollapsingToolbarLayout- -&gt;只能作为AppBarLayout的直接子布局,用于实现更多效果</p>
</li>
<li><p>RecyclerView- -&gt;ListView的代替品</p>
</li>
</ol>
<p>// 话不多说</p>
<p>1.ToolBar<br>-</p>
<blockquote>
<p>Toolbar强大之处在于,他不仅继承了ActionBar的所有功能,而且灵活性很高,可以配合其他控件完成一些Material Design的效果</p>
</blockquote>
<p>下面我们就来学习一下(首先你需要有一个项目):</p>
<ul>
<li><p><strong>修改styles文件中的style部分内容.目的是让ActionBar隐藏,可由多种实现方式,这里提供一种.</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">"AppTheme"</span> <span class="attr">parent</span>=<span class="string">"Theme.AppCompat.Light.NoActionBar"</span>&gt;</span><span class="xml"></span></div><div class="line">        <span class="comment">&lt;!-- Customize your theme here. --&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"colorPrimary"</span>&gt;</span>@color/colorPrimary<span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"colorPrimaryDark"</span>&gt;</span>@color/colorPrimaryDark<span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"colorAccent"</span>&gt;</span>@color/colorAccent<span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p><strong>xml文件中</strong></p>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><div class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"utf-8"</span><span class="meta">?&gt;</span></span></div><div class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span>&gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">android.support.v7.widget.Toolbar</span></span></div><div class="line">        <span class="attr">android:id</span>=<span class="string">"@+id/toolbar"</span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"?attr/actionBarSize"</span></div><div class="line">        <span class="attr">android:background</span>=<span class="string">"@color/colorPrimary"</span>&gt;<span class="tag">&lt;/<span class="name">android.support.v7.widget.Toolbar</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></div></pre></td></tr></table></figure>
<p>高度为?attr/actionBarSize,也可以自己指定,不过MD规范推荐用这个,同样background也是这个道理</p>
<p><strong>运行</strong></p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://img.blog.csdn.net/20170426100218290?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvUmVkV29sZkNoYW8=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="">
                </div>
                <div class="image-caption">这里写图片描述</div>
            </figure>
<p>..好难看</p>
<ul>
<li><strong>替换ActionBar</strong><br>Activity中加入代码</li>
</ul>
<figure class="highlight lasso"><table><tr><td class="code"><pre><div class="line"><span class="keyword">protected</span> <span class="literal">void</span> onCreate(Bundle savedInstanceState) &#123;</div><div class="line">        <span class="params">...</span></div><div class="line">        Toolbar toolBar = (Toolbar) findViewById(R.id.toolbar);</div><div class="line">        setSupportActionBar(toolBar);</div><div class="line">        <span class="params">...</span></div><div class="line"></div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p><strong>运行</strong></p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://img.blog.csdn.net/20170426100252518?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvUmVkV29sZkNoYW8=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="">
                </div>
                <div class="image-caption">这里写图片描述</div>
            </figure>
<p>出现我们的Title了,这个是怎么来的,是我们在Manifest中为application设置的label属性的值.和ActionBar是一样的,现在我们的ToolBar才相当于我们的ActionBar,我们也可以修改这个标题,只需要在Manifest中为当前activity添加一个label属性即可</p>
<ul>
<li>ToolBar还有好多用法,自己太单调,结合后面的组件一起来</li>
</ul>
<p>DrawerLayout<br>-<br>好多应用都有这种效果,比如QQ,XX,XXX好多软件<br>用MD中推荐了一种做法</p>
<ul>
<li>需要修改xml根布局为DrawerLayout并加入一个FrameLayout和一个TextView如下:</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><div class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"utf-8"</span><span class="meta">?&gt;</span></span></div><div class="line"><span class="tag">&lt;<span class="name">android.support.v4.widget.DrawerLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">    <span class="attr">android:id</span>=<span class="string">"@+id/drawer_layout"</span></div><div class="line">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span>&gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">FrameLayout</span></span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span>&gt;</div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">android.support.v7.widget.Toolbar</span></span></div><div class="line">            <span class="attr">android:id</span>=<span class="string">"@+id/toolbar"</span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"?attr/actionBarSize"</span></div><div class="line">            <span class="attr">android:layout_gravity</span>=<span class="string">""</span></div><div class="line">            <span class="attr">android:background</span>=<span class="string">"@color/colorPrimary"</span>&gt;<span class="tag">&lt;/<span class="name">android.support.v7.widget.Toolbar</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">FrameLayout</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:layout_gravity</span>=<span class="string">"start"</span></div><div class="line">        <span class="attr">android:text</span>=<span class="string">"然而我就是侧拉菜单"</span> /&gt;</div><div class="line"></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">android.support.v4.widget.DrawerLayout</span>&gt;</span></div></pre></td></tr></table></figure>
<p><strong>运行</strong></p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://img.blog.csdn.net/20170426100323948?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvUmVkV29sZkNoYW8=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="">
                </div>
                <div class="image-caption">这里写图片描述</div>
            </figure>
<p>android:layout_gravity=”start”用来设置滑动菜单在左边还是右边</p>
<p>然而还是有点儿问题,因为用户可能根本不知道有这个菜单,因为只有从屏幕左侧向右滑动才可以,所以我们要如此这般</p>
<p>Activity中</p>
<figure class="highlight aspectj"><table><tr><td class="code"><pre><div class="line"><span class="meta">@Override</span></div><div class="line">    <span class="keyword">protected</span> <span class="function"><span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</div><div class="line">        ...</div><div class="line">        setSupportActionBar(toolBar);</div><div class="line">        mDrawerLayout = (DrawerLayout) findViewById(R.id.drawer_layout);</div><div class="line">        ActionBar actionBar = getSupportActionBar();</div><div class="line">        <span class="keyword">if</span> (actionBar != <span class="keyword">null</span>) &#123;</div><div class="line">            <span class="comment">//  使ActionBar左侧的按钮默认可见 是一个←</span></div><div class="line">            actionBar.setDisplayHomeAsUpEnabled(<span class="keyword">true</span>);</div><div class="line">            <span class="comment">//  修改图标</span></div><div class="line">            actionBar.setHomeAsUpIndicator(R.drawable.ic_menu_home);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">boolean</span> <span class="title">onOptionsItemSelected</span><span class="params">(MenuItem item)</span> </span>&#123;</div><div class="line">        <span class="keyword">switch</span> (item.getItemId()) &#123;</div><div class="line">            <span class="keyword">case</span> android.R.id.home:</div><div class="line">                mDrawerLayout.openDrawer(GravityCompat.START);</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>// <figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://img.blog.csdn.net/20170426100434028?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvUmVkV29sZkNoYW8=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure></p>
<p>然而功能是实现了,但是还是很丑,不过可以的,前面已经说了,有个和DrawerLayout组合用的组件,组合起来用就不丑啦.</p>
<p>NavigationView<br>-</p>
<ul>
<li>使用方法很简单,将原本TextView的位置用NavigationView替换了就是了-&gt;需要加依赖&lt;-<blockquote>
<p>compile ‘com.android.support:design:25.3.1’</p>
<figure class="highlight stylus"><table><tr><td class="code"><pre><div class="line">&lt;android<span class="selector-class">.support</span><span class="selector-class">.design</span><span class="selector-class">.widget</span><span class="selector-class">.NavigationView</span></div><div class="line">        android:layout_width=<span class="string">"match_parent"</span></div><div class="line">        android:layout_height=<span class="string">"match_parent"</span></div><div class="line">        android:layout_gravity=<span class="string">"start"</span></div><div class="line">        android:<span class="attribute">background</span>=<span class="string">"@color/colorPrimary"</span> /&gt;</div></pre></td></tr></table></figure>
</blockquote>
</li>
</ul>
<p>运行之后 效果还是一样,只不过没字了,因为不是TextView,好了<br>NavigationView有两个属性</p>
<ol>
<li>app:menu</li>
<li>app:headerLayout</li>
</ol>
<p>具体是做什么的,写完你就知道了</p>
<ul>
<li>首先我们建立一个menu_nav.xml 肯定在menu文件夹中</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><div class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"utf-8"</span><span class="meta">?&gt;</span></span></div><div class="line"><span class="tag">&lt;<span class="name">menu</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">group</span> <span class="attr">android:checkableBehavior</span>=<span class="string">"single"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">item</span></span></div><div class="line">            <span class="attr">android:id</span>=<span class="string">"@+id/menu_nav_1"</span></div><div class="line">            <span class="attr">android:icon</span>=<span class="string">"@drawable/ic_menu_home"</span></div><div class="line">            <span class="attr">android:title</span>=<span class="string">"我是1"</span> /&gt;</div><div class="line">        <span class="tag">&lt;<span class="name">item</span></span></div><div class="line">            <span class="attr">android:id</span>=<span class="string">"@+id/menu_nav_2"</span></div><div class="line">            <span class="attr">android:icon</span>=<span class="string">"@drawable/ic_menu_home"</span></div><div class="line">            <span class="attr">android:title</span>=<span class="string">"我是2"</span> /&gt;</div><div class="line">    <span class="tag">&lt;/<span class="name">group</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">menu</span>&gt;</span></div></pre></td></tr></table></figure>
<p>group android:checkableBehavior=”single”<br>这个属性是为了限制单选</p>
<ul>
<li>我们再建立一个nav_header.xml 在layout文件夹中</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">    <span class="attr">android:layout_height</span>=<span class="string">"180dp"</span></div><div class="line">    <span class="attr">android:orientation</span>=<span class="string">"vertical"</span>&gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">ImageView</span></span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">        <span class="attr">android:scaleType</span>=<span class="string">"centerCrop"</span></div><div class="line">        <span class="attr">android:src</span>=<span class="string">"@drawable/icon_header"</span> /&gt;</div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></div></pre></td></tr></table></figure>
<p>也是很简单的一个布局</p>
<ul>
<li>为NavigationView设置属性了</li>
</ul>
<figure class="highlight stylus"><table><tr><td class="code"><pre><div class="line">&lt;android<span class="selector-class">.support</span><span class="selector-class">.design</span><span class="selector-class">.widget</span><span class="selector-class">.NavigationView</span></div><div class="line">    android:layout_width=<span class="string">"match_parent"</span></div><div class="line">    android:id=<span class="string">"@+id/design_navigation_view"</span></div><div class="line">    android:layout_height=<span class="string">"match_parent"</span></div><div class="line">    android:layout_gravity=<span class="string">"start"</span></div><div class="line">    android:<span class="attribute">background</span>=<span class="string">"@color/colorPrimary"</span></div><div class="line">    app:headerLayout=<span class="string">"@layout/nav_header"</span></div><div class="line">    app:menu=<span class="string">"@menu/menu_nav"</span> /&gt;</div></pre></td></tr></table></figure>
<p>这里是app命名空间,所以需要</p>
<blockquote>
<p>xmlns:app=”<a href="http://schemas.android.com/apk/res-auto" target="_blank" rel="external">http://schemas.android.com/apk/res-auto</a>“</p>
</blockquote>
<p>当然 直接alt+enter也会自动添加</p>
<p><strong>运行</strong></p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://img.blog.csdn.net/20170426100517941?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvUmVkV29sZkNoYW8=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="">
                </div>
                <div class="image-caption">这里写图片描述</div>
            </figure>
<ul>
<li>为NavigationView菜单项设置点击事件</li>
</ul>
<figure class="highlight groovy"><table><tr><td class="code"><pre><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="keyword">protected</span> <span class="keyword">void</span> onCreate(Bundle savedInstanceState) &#123;</div><div class="line">   ...</div><div class="line">           <span class="keyword">if</span> (actionBar != <span class="literal">null</span>) &#123;</div><div class="line">        <span class="comment">//  使ActionBar左侧的按钮默认可见 是一个←</span></div><div class="line">        actionBar.setDisplayHomeAsUpEnabled(<span class="literal">true</span>);</div><div class="line">        <span class="comment">//  修改图标</span></div><div class="line">        actionBar.setHomeAsUpIndicator(R.drawable.ic_menu_home);</div><div class="line">    &#125;</div><div class="line">    mNavigationView = (NavigationView) findViewById(R.id.design_navigation_view);</div><div class="line">    mNavigationView.setNavigationItemSelectedListener(<span class="keyword">new</span> NavigationView.OnNavigationItemSelectedListener() &#123;</div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="keyword">public</span> <span class="keyword">boolean</span> onNavigationItemSelected(<span class="meta">@NonNull</span> MenuItem item) &#123;</div><div class="line">            <span class="keyword">switch</span> (item.getItemId()) &#123;</div><div class="line">                <span class="keyword">case</span> R.id.<span class="string">menu_nav_1:</span></div><div class="line">                <span class="keyword">case</span> R.id.<span class="string">menu_nav_2:</span></div><div class="line">                    mDrawerLayout.closeDrawers();</div><div class="line">                    <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>好了我们继续来,悬浮式按钮</p>
<p>FloatingActionButton<br>-</p>
<p>知乎右下角的那个圆型按钮就是了</p>
<p>实现</p>
<ul>
<li>xml中我们写在ToolBar下方</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">FrameLayout</span></span></div><div class="line">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span>&gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">android.support.v7.widget.Toolbar</span></span></div><div class="line">        <span class="attr">android:id</span>=<span class="string">"@+id/toolbar"</span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"?attr/actionBarSize"</span></div><div class="line">        <span class="attr">android:background</span>=<span class="string">"@color/colorPrimary"</span>&gt;<span class="tag">&lt;/<span class="name">android.support.v7.widget.Toolbar</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">android.support.design.widget.FloatingActionButton</span></span></div><div class="line">        <span class="attr">android:id</span>=<span class="string">"@+id/fab"</span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">        <span class="attr">android:layout_gravity</span>=<span class="string">"bottom|end"</span></div><div class="line">        <span class="attr">android:layout_margin</span>=<span class="string">"16dp"</span></div><div class="line">        <span class="attr">android:src</span>=<span class="string">"@drawable/ic_menu_home"</span> /&gt;</div><div class="line"><span class="tag">&lt;/<span class="name">FrameLayout</span>&gt;</span></div></pre></td></tr></table></figure>
<p>都是老属性,大家一看效果便能明白:</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://img.blog.csdn.net/20170426100542239?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvUmVkV29sZkNoYW8=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="">
                </div>
                <div class="image-caption">这里写图片描述</div>
            </figure>
<ul>
<li>基本事件</li>
</ul>
<p>它也有基本的OnOlick事件,使用方式和普通View相同,不做过多说明</p>
<p>Snackbar<br>-</p>
<p>Snackbar不是Toast的替代品,Snackbar只是能够和用户交互而已,但是会自动消失,介于Dialog和Toast之间的组件,使用方式也是介于两者之间;</p>
<p>我们就在FloatingActionButton的事件中显示Snackbar</p>
<figure class="highlight aspectj"><table><tr><td class="code"><pre><div class="line">mFloatingActionButton.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</div><div class="line">        Snackbar.make(v, <span class="string">"然而我弹出来了"</span>, Snackbar.LENGTH_SHORT).setAction(<span class="string">"点我"</span>, <span class="keyword">new</span> View.OnClickListener() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</div><div class="line">                Snackbar.make(v, <span class="string">"然而你点我也没用"</span>, Snackbar.LENGTH_SHORT).show();</div><div class="line">            &#125;</div><div class="line">        &#125;).show();</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p><strong>运行</strong></p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://img.blog.csdn.net/20170426100621145?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvUmVkV29sZkNoYW8=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述](http://img.blog.csdn.net/20170426100607614?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvUmVkV29sZkNoYW8=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)![这里写图片描述" title="">
                </div>
                <div class="image-caption">这里写图片描述](http://img.blog.csdn.net/20170426100607614?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvUmVkV29sZkNoYW8=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)![这里写图片描述</div>
            </figure>
<p>咳咳,这里Snackbar把下面的FAB挡住了,我们需要解决这个问题,谷歌为我们创造了这个问题,肯定也有相应的解决办法- -&gt;CoordinatorLayout</p>
<p>CoordinatorLayout<br>-<br>CoordinatorLayout是一个加强版的FrameLayout,可以监听所有子控件的各种事件,然后自动帮我们做出最为合理的相应;</p>
<p>我们把FrameLayout替换为CoordinatorLayout</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">android.support.design.widget.CoordinatorLayout</span></span></div><div class="line">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span>&gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">android.support.v7.widget.Toolbar</span></span></div><div class="line">        <span class="attr">android:id</span>=<span class="string">"@+id/toolbar"</span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"?attr/actionBarSize"</span></div><div class="line">        <span class="attr">android:layout_gravity</span>=<span class="string">""</span></div><div class="line">        <span class="attr">android:background</span>=<span class="string">"@color/colorPrimary"</span>&gt;<span class="tag">&lt;/<span class="name">android.support.v7.widget.Toolbar</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">android.support.design.widget.FloatingActionButton</span></span></div><div class="line">        <span class="attr">android:id</span>=<span class="string">"@+id/fab"</span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">        <span class="attr">android:layout_gravity</span>=<span class="string">"bottom|end"</span></div><div class="line">        <span class="attr">android:layout_margin</span>=<span class="string">"16dp"</span></div><div class="line">        <span class="attr">android:src</span>=<span class="string">"@drawable/ic_menu_home"</span> /&gt;</div><div class="line"><span class="tag">&lt;/<span class="name">android.support.design.widget.CoordinatorLayout</span>&gt;</span></div></pre></td></tr></table></figure>
<p><strong>运行</strong></p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://img.blog.csdn.net/20170426100717094?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvUmVkV29sZkNoYW8=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="">
                </div>
                <div class="image-caption">这里写图片描述</div>
            </figure>
<p>需要注意的是,只有Snackbar传入的第一个参数View是CoordinatorLayout的子组件时,此效果才会生效,因为我们传入的是v,而v是我们的FAB,所以会生效;</p>
<p>CardView<br>-</p>
<p>需要依赖</p>
<blockquote>
<p>compile ‘com.android.support:cardview-v7:25.3.1’</p>
</blockquote>
<p>卡片式布局 ,他可以让页面中的元素看起来就像在卡片中一样,并且能够拥有圆角和投影.</p>
<p>咱们把这个卡片里面装上美女放到RecyclerView中去,放松一下…</p>
<p>美女图片需要加载咱们用Glide</p>
<blockquote>
<p>compile ‘com.github.bumptech.glide:glide:3.7.0’</p>
</blockquote>
<ul>
<li>首先写一个item布局,顺带着看看CardView的用法</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><div class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"utf-8"</span><span class="meta">?&gt;</span></span></div><div class="line"><span class="tag">&lt;<span class="name">android.support.v7.widget.CardView</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line">    <span class="attr">xmlns:app</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span></div><div class="line">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">    <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">    <span class="attr">android:elevation</span>=<span class="string">"5dp"</span></div><div class="line">    <span class="attr">android:orientation</span>=<span class="string">"vertical"</span></div><div class="line">    <span class="attr">app:cardCornerRadius</span>=<span class="string">"4dp"</span>&gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">        <span class="attr">android:orientation</span>=<span class="string">"vertical"</span>&gt;</div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">ImageView</span></span></div><div class="line">            <span class="attr">android:id</span>=<span class="string">"@+id/image"</span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"100dp"</span></div><div class="line">            <span class="attr">android:scaleType</span>=<span class="string">"centerCrop"</span> /&gt;</div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">            <span class="attr">android:id</span>=<span class="string">"@+id/text"</span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">            <span class="attr">android:layout_margin</span>=<span class="string">"5dp"</span></div><div class="line">            <span class="attr">android:gravity</span>=<span class="string">"center_horizontal"</span></div><div class="line">            <span class="attr">android:textSize</span>=<span class="string">"16sp"</span> /&gt;</div><div class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">android.support.v7.widget.CardView</span>&gt;</span></div></pre></td></tr></table></figure>
<p>app:cardCornerRadius=”4dp” 表示圆角的大小<br>android:elevation=”5dp”表示高度Z轴<br>数值越大,高度越高,投影范围越大,投影越浅,反之亦然;</p>
<p>CardView本质是一个FrameLayout没啥好的定位方式,咱们就嵌套一个LinearLayout;</p>
<p>之后我们写RecyclerView部分代码,主界面加入RecyclerView</p>
<figure class="highlight stylus"><table><tr><td class="code"><pre><div class="line">...</div><div class="line">&lt;/android<span class="selector-class">.support</span><span class="selector-class">.v7</span><span class="selector-class">.widget</span><span class="selector-class">.Toolbar</span>&gt;</div><div class="line"></div><div class="line">        &lt;android<span class="selector-class">.support</span><span class="selector-class">.v7</span><span class="selector-class">.widget</span><span class="selector-class">.RecyclerView</span></div><div class="line">            android:id=<span class="string">"@+id/recycler_view"</span></div><div class="line">            android:layout_width=<span class="string">"match_parent"</span></div><div class="line">            android:layout_height=<span class="string">"match_parent"</span>&gt;&lt;/android<span class="selector-class">.support</span><span class="selector-class">.v7</span><span class="selector-class">.widget</span><span class="selector-class">.RecyclerView</span>&gt;</div><div class="line"></div><div class="line">        <span class="comment">// 此处有FAB 影响妹子美观,删除</span></div><div class="line">...</div></pre></td></tr></table></figure>
<p>写好适配器以及在Activity中设置好Manager以及初始化好数据</p>
<p>###高能预警:!!!!!!下面会有一长串代码,不想复制的童鞋可以直接跳过###</p>
<ul>
<li>首先妹子实体</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MeiZi</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> String meiZiName;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> meiZiId;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MeiZi</span><span class="params">(String meiZiName, <span class="keyword">int</span> meiZiId)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.meiZiName = meiZiName;</div><div class="line">        <span class="keyword">this</span>.meiZiId = meiZiId;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getMeiZiName</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> meiZiName;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMeiZiName</span><span class="params">(String meiZiName)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.meiZiName = meiZiName;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getMeiZiId</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> meiZiId;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMeiZiId</span><span class="params">(<span class="keyword">int</span> meiZiId)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.meiZiId = meiZiId;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>适配器</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MeiZiAdapter</span> <span class="keyword">extends</span> <span class="title">RecyclerView</span>.<span class="title">Adapter</span>&lt;<span class="title">MeiZiAdapter</span>.<span class="title">MeiZiViewHolder</span>&gt; <span class="keyword">implements</span> <span class="title">View</span>.<span class="title">OnClickListener</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> List&lt;MeiZi&gt; meiZiList;</div><div class="line">    <span class="keyword">private</span> Context mContext;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> OnItemClickListener listener;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MeiZiAdapter</span><span class="params">(List&lt;MeiZi&gt; meiZiList, Context mContext)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.meiZiList = meiZiList;</div><div class="line">        <span class="keyword">this</span>.mContext = mContext;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setOnItemClickListener</span><span class="params">(OnItemClickListener listener)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.listener = listener;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> MeiZiViewHolder <span class="title">onCreateViewHolder</span><span class="params">(ViewGroup parent, <span class="keyword">int</span> viewType)</span> </span>&#123;</div><div class="line">        View view = LayoutInflater.from(mContext).inflate(R.layout.item_meizi_list, parent, <span class="keyword">false</span>);</div><div class="line">        view.setOnClickListener(<span class="keyword">this</span>);</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> MeiZiViewHolder(view);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onBindViewHolder</span><span class="params">(MeiZiViewHolder holder, <span class="keyword">int</span> position)</span> </span>&#123;</div><div class="line">        MeiZi meiZi = meiZiList.get(position);</div><div class="line">        Glide.with(mContext).load(meiZi.getMeiZiId()).into(holder.imageView);</div><div class="line">        holder.textView.setText(meiZi.getMeiZiName());</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getItemCount</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> meiZiList.size();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (listener == <span class="keyword">null</span>)</div><div class="line">            <span class="keyword">return</span>;</div><div class="line">        listener.OnItemClick(v);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">MeiZiViewHolder</span> <span class="keyword">extends</span> <span class="title">RecyclerView</span>.<span class="title">ViewHolder</span> </span>&#123;</div><div class="line">        ImageView imageView;</div><div class="line">        TextView textView;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="title">MeiZiViewHolder</span><span class="params">(View itemView)</span> </span>&#123;</div><div class="line">            <span class="keyword">super</span>(itemView);</div><div class="line">            imageView = (ImageView) itemView.findViewById(R.id.image);</div><div class="line">            textView = (TextView) itemView.findViewById(R.id.text);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">OnItemClickListener</span> </span>&#123;</div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">OnItemClick</span><span class="params">(View v)</span></span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>Activity中部分代码</li>
</ul>
<figure class="highlight mipsasm"><table><tr><td class="code"><pre><div class="line">...</div><div class="line">initMeiZi()<span class="comment">;</span></div><div class="line">        mRecyclerView = (RecyclerView) findViewById(R.id.recycler_view)<span class="comment">;</span></div><div class="line">        mManager = new GridLayoutManager(this, <span class="number">2</span>)<span class="comment">;</span></div><div class="line">        mAdapter = new MeiZiAdapter(meiZiList, this)<span class="comment">;</span></div><div class="line">        mRecyclerView.setLayoutManager(mManager)<span class="comment">;</span></div><div class="line">        mAdapter.setOnItemClickListener(new MeiZiAdapter.OnItemClickListener() &#123;</div><div class="line">            @Override</div><div class="line">            public void OnItemClick(View v) &#123;</div><div class="line">                Snackbar.make(v, <span class="string">"点击了第"</span> + mRecyclerView.getChildAdapterPosition(v) + <span class="string">"个"</span></div><div class="line">                        , Snackbar.LENGTH_SHORT).<span class="keyword">show();</span></div><div class="line"></div><div class="line">            &#125;</div><div class="line">        &#125;)<span class="comment">;</span></div><div class="line">        mRecyclerView.setAdapter(mAdapter)<span class="comment">;</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private void initMeiZi() &#123;</div><div class="line">        meiZiList.clear()<span class="comment">;</span></div><div class="line">        for (int i = <span class="number">0</span><span class="comment">; i &lt; 30; i++) &#123;</span></div><div class="line">            <span class="built_in">Random</span> <span class="built_in">random</span> = new <span class="built_in">Random</span>()<span class="comment">;</span></div><div class="line">            int index = <span class="built_in">random</span>.nextInt(fruits.length)<span class="comment">;</span></div><div class="line">            meiZiList.<span class="keyword">add(fruits[index]);</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p><strong>运行</strong><br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://img.blog.csdn.net/20170426100941159?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvUmVkV29sZkNoYW8=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="">
                </div>
                <div class="image-caption">这里写图片描述</div>
            </figure> </p>
<p>妹子们还是挺好看的.不过咱们可爱的妹子们把咱们的ToolBar遮挡了…无奈,因为CoordinatorLayout本身是一个FrameLayout,怎么解决?用偏移量么?…不要,MD给我们提供了更好的解决办法</p>
<p>AppBarLayout<br>-</p>
<p>AppBarLayout是一个垂直的LinearLayout,用它来包裹一下ToolBar再设置一下属性即可</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">android.support.design.widget.CoordinatorLayout</span></span></div><div class="line">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span>&gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">android.support.design.widget.AppBarLayout</span></span></div><div class="line">        <span class="attr">android:id</span>=<span class="string">"@+id/app_bar_layout"</span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span>&gt;</div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">android.support.v7.widget.Toolbar</span></span></div><div class="line">            <span class="attr">android:id</span>=<span class="string">"@+id/toolbar"</span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"?attr/actionBarSize"</span></div><div class="line">            <span class="attr">android:background</span>=<span class="string">"@color/colorPrimary"</span>&gt;<span class="tag">&lt;/<span class="name">android.support.v7.widget.Toolbar</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">android.support.design.widget.AppBarLayout</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">android.support.v7.widget.RecyclerView</span></span></div><div class="line">        <span class="attr">android:id</span>=<span class="string">"@+id/recycler_view"</span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">app:layout_behavior</span>=<span class="string">"@string/appbar_scrolling_view_behavior"</span>&gt;<span class="tag">&lt;/<span class="name">android.support.v7.widget.RecyclerView</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">android.support.design.widget.CoordinatorLayout</span>&gt;</span></div></pre></td></tr></table></figure>
<blockquote>
<p>app:layout_behavior=”@string/appbar_scrolling_view_behavior”<br>这个,咱们Ctrl点进去看看</p>
<string name="appbar_scrolling_view_behavior" translatable="false">android.support.design.widget.AppBarLayout$ScrollingViewBehavior</string>

</blockquote>
<p>这么着写,Recycler就会在ToolBar的下方了</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://img.blog.csdn.net/20170426101002378?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvUmVkV29sZkNoYW8=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="">
                </div>
                <div class="image-caption">这里写图片描述</div>
            </figure>
<p>不过这还不是AppbarLayout真正炫酷的地方.它给他的子控件提供一个属性,可以让它随着列表的操作做出相应的操作</p>
<figure class="highlight stylus"><table><tr><td class="code"><pre><div class="line">&lt;android<span class="selector-class">.support</span><span class="selector-class">.v7</span><span class="selector-class">.widget</span><span class="selector-class">.Toolbar</span></div><div class="line">                android:id=<span class="string">"@+id/toolbar"</span></div><div class="line">                android:layout_width=<span class="string">"match_parent"</span></div><div class="line">                android:layout_height=<span class="string">"?attr/actionBarSize"</span></div><div class="line">                android:<span class="attribute">background</span>=<span class="string">"@color/colorPrimary"</span></div><div class="line">                app:layout_scrollFlags=<span class="string">"scroll|enterAlways|snap"</span>&gt;&lt;/android<span class="selector-class">.support</span><span class="selector-class">.v7</span><span class="selector-class">.widget</span><span class="selector-class">.Toolbar</span>&gt;</div></pre></td></tr></table></figure>
<blockquote>
<p>app:layout_scrollFlags=”scroll|enterAlways|snap”&gt;</p>
</blockquote>
<p>说明一下</p>
<ul>
<li>scroll –&gt;当RecyclerView向上滚动时,Toolbar会跟着向上动</li>
<li>enterAlways –&gt;当RecyclerView向下滑动时.ToolBar会跟着向下动并显示</li>
<li>snap –&gt;当RecyclerView还没有完全隐藏或者显示的时候,自动判断ToolBar的显示状态</li>
</ul>
<p>大家可以自行运行一下</p>
<p>RecyclerView得刷新吧,下拉刷新,MD也给我们提供了一个组件,目前知乎掘金动用到了这个SwipeRefreshLayout</p>
<p>SwipeRefreshLayout<br>-<br>没啥解释的,代码才是王道</p>
<p>同样也是用它包裹RecyclerView,当然,RecyclerView的部分属性要移到SwipeRefreshLayout上来;</p>
<figure class="highlight stylus"><table><tr><td class="code"><pre><div class="line">&lt;android<span class="selector-class">.support</span><span class="selector-class">.v4</span><span class="selector-class">.widget</span><span class="selector-class">.SwipeRefreshLayout</span></div><div class="line">    android:id=<span class="string">"@+id/swipe_refresh_layout"</span></div><div class="line">    android:layout_width=<span class="string">"match_parent"</span></div><div class="line">    android:layout_height=<span class="string">"match_parent"</span></div><div class="line">    app:layout_behavior=<span class="string">"@string/appbar_scrolling_view_behavior"</span>&gt;</div><div class="line"></div><div class="line">    &lt;android<span class="selector-class">.support</span><span class="selector-class">.v7</span><span class="selector-class">.widget</span><span class="selector-class">.RecyclerView</span></div><div class="line">        android:id=<span class="string">"@+id/recycler_view"</span></div><div class="line">        android:layout_width=<span class="string">"match_parent"</span></div><div class="line">        android:layout_height=<span class="string">"match_parent"</span>&gt;&lt;/android<span class="selector-class">.support</span><span class="selector-class">.v7</span><span class="selector-class">.widget</span><span class="selector-class">.RecyclerView</span>&gt;</div><div class="line">&lt;/android<span class="selector-class">.support</span><span class="selector-class">.v4</span><span class="selector-class">.widget</span><span class="selector-class">.SwipeRefreshLayout</span>&gt;</div></pre></td></tr></table></figure>
<p>此时运行的话,会这样…</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://img.blog.csdn.net/20170426101021006?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvUmVkV29sZkNoYW8=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="">
                </div>
                <div class="image-caption">这里写图片描述</div>
            </figure>
<p>这个圈圈消失不掉.因为我们没有对这个SwipeRefreshLayout进行事件响应,下面我们开始写它的事件响应;</p>
<figure class="highlight processing"><table><tr><td class="code"><pre><div class="line">mSwipeRefreshLayout = (SwipeRefreshLayout) findViewById(R.id.swipe_refresh_layout);</div><div class="line"><span class="comment">//  轮询颜色</span></div><div class="line">mSwipeRefreshLayout.setColorSchemeResources(R.<span class="built_in">color</span>.colorAccent, R.<span class="built_in">color</span>.colorPrimary, R.<span class="built_in">color</span>.colorPrimaryDark);</div><div class="line">mSwipeRefreshLayout.setOnRefreshListener(<span class="keyword">new</span> SwipeRefreshLayout.OnRefreshListener() &#123;</div><div class="line">    @Override</div><div class="line">    <span class="keyword">public</span> <span class="keyword">void</span> onRefresh() &#123;</div><div class="line">        initMeiZi();</div><div class="line">        mAdapter.notifyDataSetChanged();</div><div class="line">        mSwipeRefreshLayout.setRefreshing(<span class="keyword">false</span>);</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>这样就能消失了….简单吧,至于下拉加载更多,博主还没有找到适合MD规范的组件,不过这里提供一种实现方法,仅提供代码</p>
<figure class="highlight processing"><table><tr><td class="code"><pre><div class="line">    mRecyclerView.addOnScrollListener(<span class="keyword">new</span> RecyclerView.OnScrollListener() &#123;</div><div class="line">        @Override</div><div class="line">        <span class="keyword">public</span> <span class="keyword">void</span> onScrollStateChanged(RecyclerView recyclerView, <span class="built_in">int</span> newState) &#123;</div><div class="line">            <span class="keyword">super</span>.onScrollStateChanged(recyclerView, newState);</div><div class="line">            <span class="comment">//  newState RecyclerView的滑动状态</span></div><div class="line">            <span class="comment">//  0 滑动停止</span></div><div class="line">            <span class="comment">//  1 屏幕没停且手在屏幕上</span></div><div class="line">            <span class="comment">//  2 屏幕没停 惯性滑动</span></div><div class="line">            <span class="comment">//  当滑动停止并且屏幕最后一个可见的Item的pos+3大于等于ItemCount的时候 下载更多</span></div><div class="line">            <span class="keyword">if</span> (newState == RecyclerView.SCROLL_STATE_IDLE &amp;&amp; mManager.findLastVisibleItemPosition() + <span class="number">3</span> &gt;= mManager.getItemCount()) &#123;</div><div class="line">                initMeiZi(<span class="keyword">true</span>);</div><div class="line">                mAdapter.notifyDataSetChanged();</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line"></div><div class="line"><span class="keyword">private</span> <span class="keyword">void</span> initMeiZi(<span class="built_in">boolean</span> isLoadMore) &#123;</div><div class="line">    <span class="keyword">if</span> (!isLoadMore) &#123;</div><div class="line">        meiZiList.<span class="built_in">clear</span>();</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">25</span>; i++) &#123;</div><div class="line">        Random <span class="built_in">random</span> = <span class="keyword">new</span> Random();</div><div class="line">        <span class="built_in">int</span> index = <span class="built_in">random</span>.nextInt(meiZis.length);</div><div class="line">        meiZiList.<span class="built_in">add</span>(meiZis[index]);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>…还剩一个CollapsingToolbarLayout了吧,那咱们就看看妹子的详情;-)</p>
<p>CollapsingToolbarLayout<br>-</p>
<p>配合ToolBar和AppBarLayout实现类似QQ空间的样式</p>
<p>###高能预警:!!!!!!下面也会有一长串代码,不想复制的童鞋可以直接跳过###<br><strong>具体是详情Act以及跳转的部分代码还有xml</strong></p>
<figure class="highlight aspectj"><table><tr><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MeiZiDetailAct</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> Toolbar toolbar;</div><div class="line">    <span class="keyword">private</span> ImageView imageView;</div><div class="line">    <span class="keyword">private</span> TextView textView;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> MeiZi meiZi;</div><div class="line"></div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">void</span> <span class="title">actionStart</span><span class="params">(Context context, MeiZi fruit)</span> </span>&#123;</div><div class="line">        Intent intent = <span class="keyword">new</span> Intent(context, MeiZiDetailAct.class);</div><div class="line">        intent.putExtra(<span class="string">"MEI_ZI"</span>, fruit);</div><div class="line">        context.startActivity(intent);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="keyword">protected</span> <span class="function"><span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(@Nullable Bundle savedInstanceState)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</div><div class="line">        setContentView(R.layout.act_meizi_detail);</div><div class="line">        toolbar = (Toolbar) findViewById(R.id.toolbar);</div><div class="line">        setSupportActionBar(toolbar);</div><div class="line">        ActionBar actionBar = getSupportActionBar();</div><div class="line">        <span class="keyword">if</span> (actionBar != <span class="keyword">null</span>) &#123;</div><div class="line">            actionBar.setDisplayHomeAsUpEnabled(<span class="keyword">true</span>);</div><div class="line">        &#125;</div><div class="line">        imageView = (ImageView) findViewById(R.id.image);</div><div class="line">        textView = (TextView) findViewById(R.id.text);</div><div class="line"></div><div class="line">        meiZi = (MeiZi) getIntent().getSerializableExtra(<span class="string">"MEI_ZI"</span>);</div><div class="line">        <span class="keyword">if</span> (meiZi == <span class="keyword">null</span>) &#123;</div><div class="line">            <span class="keyword">return</span>;</div><div class="line">        &#125;</div><div class="line">        Glide.with(<span class="keyword">this</span>).load(meiZi.getMeiZiId()).into(imageView);</div><div class="line"></div><div class="line">        StringBuilder stringBuilder = <span class="keyword">new</span> StringBuilder();</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">300</span>; i++) &#123;</div><div class="line">            stringBuilder.append(meiZi.getMeiZiName() + <span class="string">"_ _"</span> + i + <span class="string">"_ _"</span>);</div><div class="line">        &#125;</div><div class="line">        textView.setText(stringBuilder);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">boolean</span> <span class="title">onOptionsItemSelected</span><span class="params">(MenuItem item)</span> </span>&#123;</div><div class="line">        <span class="keyword">switch</span> (item.getItemId()) &#123;</div><div class="line">            <span class="keyword">case</span> android.R.id.home:</div><div class="line">                finish();</div><div class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="function"><span class="keyword">return</span> <span class="keyword">super</span>.<span class="title">onOptionsItemSelected</span><span class="params">(item)</span></span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>跳转部分</p>
<figure class="highlight aspectj"><table><tr><td class="code"><pre><div class="line">mAdapter.setOnItemClickListener(<span class="keyword">new</span> MeiZiAdapter.OnItemClickListener() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">OnItemClick</span><span class="params">(View v)</span> </span>&#123;</div><div class="line">        MeiZiDetailAct.actionStart(MeiZiListAct.<span class="keyword">this</span>, meiZiList.get(mRecyclerView.getChildAdapterPosition(v)));</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="code"><pre><div class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"utf-8"</span><span class="meta">?&gt;</span></span></div><div class="line"><span class="tag">&lt;<span class="name">android.support.design.widget.CoordinatorLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line">    <span class="attr">xmlns:app</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span></div><div class="line">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span>&gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">android.support.design.widget.AppBarLayout</span></span></div><div class="line">        <span class="attr">android:id</span>=<span class="string">"@+id/app_bar_layout"</span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"250dp"</span>&gt;</div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">android.support.design.widget.CollapsingToolbarLayout</span></span></div><div class="line">            <span class="attr">android:id</span>=<span class="string">"@+id/collapsing_layout"</span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></div><div class="line">            <span class="attr">android:theme</span>=<span class="string">"@style/ThemeOverlay.AppCompat.Dark.ActionBar"</span></div><div class="line">            <span class="attr">app:contentScrim</span>=<span class="string">"@color/colorPrimary"</span></div><div class="line">            <span class="attr">app:layout_scrollFlags</span>=<span class="string">"scroll|exitUntilCollapsed"</span>&gt;</div><div class="line"></div><div class="line">            <span class="tag">&lt;<span class="name">ImageView</span></span></div><div class="line">                <span class="attr">android:id</span>=<span class="string">"@+id/image"</span></div><div class="line">                <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">                <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></div><div class="line">                <span class="attr">android:scaleType</span>=<span class="string">"centerCrop"</span></div><div class="line">                <span class="attr">app:layout_collapseMode</span>=<span class="string">"parallax"</span> /&gt;</div><div class="line"></div><div class="line">            <span class="tag">&lt;<span class="name">android.support.v7.widget.Toolbar</span></span></div><div class="line">                <span class="attr">android:id</span>=<span class="string">"@+id/toolbar"</span></div><div class="line">                <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">                <span class="attr">android:layout_height</span>=<span class="string">"?attr/actionBarSize"</span></div><div class="line">                <span class="attr">app:layout_collapseMode</span>=<span class="string">"pin"</span>&gt;</div><div class="line"></div><div class="line">            <span class="tag">&lt;/<span class="name">android.support.v7.widget.Toolbar</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">android.support.design.widget.CollapsingToolbarLayout</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">android.support.design.widget.AppBarLayout</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">android.support.v4.widget.NestedScrollView</span></span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">app:layout_behavior</span>=<span class="string">"@string/appbar_scrolling_view_behavior"</span>&gt;</div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">LinearLayout</span></span></div><div class="line">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">            <span class="attr">android:orientation</span>=<span class="string">"vertical"</span>&gt;</div><div class="line"></div><div class="line">            <span class="tag">&lt;<span class="name">android.support.v7.widget.CardView</span></span></div><div class="line">                <span class="attr">android:id</span>=<span class="string">"@+id/card_view"</span></div><div class="line">                <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">                <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">                <span class="attr">android:layout_marginBottom</span>=<span class="string">"15dp"</span></div><div class="line">                <span class="attr">android:layout_marginLeft</span>=<span class="string">"15dp"</span></div><div class="line">                <span class="attr">android:layout_marginRight</span>=<span class="string">"15dp"</span></div><div class="line">                <span class="attr">android:layout_marginTop</span>=<span class="string">"35dp"</span></div><div class="line">                <span class="attr">app:cardCornerRadius</span>=<span class="string">"4dp"</span>&gt;</div><div class="line"></div><div class="line">                <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">                    <span class="attr">android:id</span>=<span class="string">"@+id/text"</span></div><div class="line">                    <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">                    <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">                    <span class="attr">android:layout_margin</span>=<span class="string">"10dp"</span> /&gt;</div><div class="line">            <span class="tag">&lt;/<span class="name">android.support.v7.widget.CardView</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">android.support.v4.widget.NestedScrollView</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">android.support.design.widget.FloatingActionButton</span></span></div><div class="line">        <span class="attr">android:id</span>=<span class="string">"@+id/fab"</span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">        <span class="attr">android:layout_margin</span>=<span class="string">"16dp"</span></div><div class="line">        <span class="attr">android:src</span>=<span class="string">"@drawable/ic_menu_home"</span></div><div class="line">        <span class="attr">app:layout_anchor</span>=<span class="string">"@id/app_bar_layout"</span></div><div class="line">        <span class="attr">app:layout_anchorGravity</span>=<span class="string">"bottom|end"</span> /&gt;</div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">android.support.design.widget.CoordinatorLayout</span>&gt;</span></div></pre></td></tr></table></figure>
<p>这个xml有点长,我简单说一下.<br>CollapsingToolbarLayout</p>
<ul>
<li>app:contentScrim=”@color/colorPrimary”    区域折叠以及折叠后 显示的颜色,CollapsingToolbarLayout折叠之后 就是一个ToolBar</li>
<li>app:layout_scrollFlags=”scroll|exitUntilCollapsed”之前见过,exitUntilCollapsed说的是当折叠完成 就停下 不再移出屏幕</li>
</ul>
<p>Image</p>
<ul>
<li>app:layout_collapseMode=”parallax” 指定它的折叠模式,只有CollapsingToolbarLayout子控件才有的属性, parallax意思是折叠过程中产生错位偏移</li>
<li>app:layout_collapseMode=”pin” 折叠过程中 形状不变</li>
</ul>
<p>最下面有一个NestedScrollView,可以响应滚动事件,因为只有滚动才能折叠,类似ScrollView但是ScrollView不支持响应滚动;</p>
<p>FloatingActionButton</p>
<ul>
<li>app:layout_anchor=”@id/app_bar_layout” 为FAB指定锚点,使其以锚点为基准显示</li>
<li>app:layout_anchorGravity=”bottom|end” 以锚点为基准显示的位置</li>
</ul>
<p>然后我们运行<br>图录制的不咋地<br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://img.blog.csdn.net/20170426102821859?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvUmVkV29sZkNoYW8=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="">
                </div>
                <div class="image-caption">这里写图片描述</div>
            </figure></p>
<p>资源都在源码中,可能和本文格式上有点出入,但是代码大致相同;</p>
<p><a href="https://github.com/RedWolfChao/MaterialDesignDemo" target="_blank" rel="external">https://github.com/RedWolfChao/MaterialDesignDemo</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;反编译看的实在有点头疼,于是就仔细研究了一下前一段时间的一篇文章Material Design规范,发现这个东西2014年就出来了,为什么我今年才发现呢..无奈.于是乎,读书查资料,撸出一个Demo来;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Demo主要知识点&amp;lt;解释纯属个人见
    
    </summary>
    
    
      <category term="Material_Design" scheme="http://joryhe.coding.me/tags/Material-Design/"/>
    
  </entry>
  
</feed>
